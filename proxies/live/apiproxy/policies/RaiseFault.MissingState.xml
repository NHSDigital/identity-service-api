<RaiseFault async="false" continueOnError="false" enabled="true" name="RaiseFault.MissingState">
    <FaultResponse>
        <Set>
            <StatusCode>302</StatusCode>
            <Headers>
              <Header name="Location">{private.apigee.authorize_endpoint}</Header>
            </Headers>
            <Payload contentType="application/x-www-form-urlencoded">
                {
                    "redirect_uri": "{request.queryparam.redirect_uri}",
                    "error" : "invalid_request",
                    "error_description" :"state is missing",
                    "message_id": "{messageid}"
                }
            </Payload>
          </Set>
    </FaultResponse>
    <IgnoreUnresolvedVariables>true</IgnoreUnresolvedVariables>
</RaiseFault>
