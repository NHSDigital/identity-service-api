{"completed": true, "point": [{"id": "Paused", "results": []}, {"id": "Resumed", "results": []}, {"id": "StateChange", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "To", "value": "REQ_HEADERS_PARSED"}, {"name": "From", "value": "REQ_START"}]}, "timestamp": "04-11-21 14:51:08:083"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Apigee.client.connection", "value": "3.11.106.35:22990;35.234.138.138:443;ssl"}, {"name": "X-Apigee.Host", "value": "internal-dev.api.service.nhs.uk:443"}, {"name": "X-Apigee.Message-ID", "value": "rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "X-Apigee.Message-Timeout", "value": "57"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "environment.name", "value": "internal-dev"}, {"name": "environment.qualifiedname", "value": "nhsd-nonprod__internal-dev"}, {"name": "environment.orgname", "value": "nhsd-nonprod"}]}, "timestamp": "04-11-21 14:51:08:083"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "organization.name", "value": "nhsd-nonprod"}]}, "timestamp": "04-11-21 14:51:08:083"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "apiproxy.qualifiedname", "value": "identity-service-pr-251__14"}, {"name": "apiproxy.basepath", "value": "/"}, {"name": "apiproxy.revision", "value": "14"}, {"name": "apiproxy.name", "value": "identity-service-pr-251"}]}, "timestamp": "04-11-21 14:51:08:083"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "proxy.basepath", "value": "oauth2-pr-251"}, {"name": "proxy.pathsuffix", "value": "/userinfo"}, {"name": "proxy.url", "value": "https://internal-dev.api.service.nhs.uk/oauth2-pr-251/userinfo"}, {"name": "proxy.name", "value": "default"}, {"name": "proxy.client.ip", "value": "3.11.106.35"}]}, "timestamp": "04-11-21 14:51:08:083"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "virtualhost.aliases.values", "value": "[\"nhsd-nonprod-internal-dev.apigee.net\",\"internal-dev.api.service.nhs.uk\"]"}, {"name": "virtualhost.port", "value": "443"}, {"name": "virtualhost.name", "value": "secure"}, {"name": "virtualhost.ssl.enabled", "value": "true"}, {"name": "virtualhost.aliases", "value": "{nhsd-nonprod-internal-dev.apigee.net,internal-dev.api.service.nhs.uk}"}, {"name": "virtualhost.ip", "value": "35.234.138.138"}]}, "timestamp": "04-11-21 14:51:08:083"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": []}, "timestamp": "04-11-21 14:51:08:084"}]}, {"id": "StateChange", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "To", "value": "PROXY_REQ_FLOW"}, {"name": "From", "value": "REQ_HEADERS_PARSED"}]}, "timestamp": "04-11-21 14:51:08:084"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "type", "value": "FlowHookAction"}]}, "timestamp": "04-11-21 14:51:08:084"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": []}]}, {"id": "FlowCallout", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "PreProxyFlowHook->PreProxySharedFlow"}]}, "timestamp": "04-11-21 14:51:08:084"}]}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "keyvaluemapoperations"}, {"name": "type", "value": "KeyValueMapOperationsExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "KeyValueMapOperations.GetCommonSecrets"}, {"name": "stepDefinition-name", "value": "KeyValueMapOperations.GetCommonSecrets"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:084"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "current.flow"}}, {"Set": {"name": "apigee.metrics.policy.KeyValueMapOperations.GetCommonSecrets.timeTaken", "success": true, "value": "38298"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "keyvaluemapoperations"}, {"name": "type", "value": "KeyValueMapOperationsExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "KeyValueMapOperations.GetConfigClear"}, {"name": "stepDefinition-name", "value": "KeyValueMapOperations.GetConfigClear"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:084"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "current.flow"}}, {"Set": {"name": "apim.feature_toggles_raw", "success": true, "value": "{\"enable-token-exchange\": true, \"enable-nhs-login-combined-auth\": true, \"enable-citizen-access\": true}"}}, {"Set": {"name": "apigee.metrics.policy.KeyValueMapOperations.GetConfigClear.timeTaken", "success": true, "value": "26641"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "keyvaluemapoperations"}, {"name": "type", "value": "KeyValueMapOperationsExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "KeyValueMapOperations.GetConfigEncrypted"}, {"name": "stepDefinition-name", "value": "KeyValueMapOperations.GetConfigEncrypted"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:084"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "current.flow"}}, {"Set": {"name": "apigee.metrics.policy.KeyValueMapOperations.GetConfigEncrypted.timeTaken", "success": true, "value": "23046"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "javascript-executionTime", "value": "0"}, {"name": "action", "value": "CONTINUE"}, {"name": "javascript-timeLimit", "value": "200"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "javascript"}, {"name": "javascript-name", "value": "UnpackVars.js"}, {"name": "type", "value": "JavascriptStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "Javascript.UnpackVars"}, {"name": "stepDefinition-name", "value": "Javascript.UnpackVars"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:085"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "current.flow"}}, {"Get": {"name": "apim.vars_raw"}}, {"Get": {"name": "apim.feature_toggles_raw", "value": "{\"enable-token-exchange\": true, \"enable-nhs-login-combined-auth\": true, \"enable-citizen-access\": true}"}}, {"Set": {"name": "apim.feature_toggles.enable-token-exchange", "success": true, "value": "true"}}, {"Set": {"name": "apim.feature_toggles.enable-nhs-login-combined-auth", "success": true, "value": "true"}}, {"Set": {"name": "apim.feature_toggles.enable-citizen-access", "success": true, "value": "true"}}, {"Set": {"name": "apigee.metrics.policy.Javascript.UnpackVars.timeTaken", "success": true, "value": "175128"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.Copy.RequestDataForSplunk"}, {"name": "stepDefinition-name", "value": "AssignMessage.Copy.RequestDataForSplunk"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:085"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "current.flow"}}, {"Get": {"name": "request.uri", "value": "/oauth2-pr-251/userinfo"}}, {"Set": {"name": "request-data-for-splunk.uri", "success": true, "value": "/oauth2-pr-251/userinfo"}}, {"Get": {"name": "request.url"}}, {"Set": {"name": "request-data-for-splunk.url", "success": true, "value": ""}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.Copy.RequestDataForSplunk.timeTaken", "success": true, "value": "39547"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.Copy.RequestHeaders"}, {"name": "stepDefinition-name", "value": "AssignMessage.Copy.RequestHeaders"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:085"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "current.flow"}}, {"Get": {"name": "original-request-details"}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.Copy.RequestHeaders.timeTaken", "success": true, "value": "8098"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.Set.NHSDCorrelationIDHeader"}, {"name": "stepDefinition-name", "value": "AssignMessage.Set.NHSDCorrelationIDHeader"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:085"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "current.flow"}}, {"Get": {"name": "message.header.X-Request-ID"}}, {"Get": {"name": "message.header.X-Correlation-ID"}}, {"Get": {"name": "messageid", "value": "rrt-1078180899246236782-c-geu2-23779-897920-1"}}, {"Set": {"name": "message.header.NHSD-Correlation-ID", "success": true, "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.Set.NHSDCorrelationIDHeader.timeTaken", "success": true, "value": "12263"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.Set.NHSDRequestIDHeader"}, {"name": "stepDefinition-name", "value": "AssignMessage.Set.NHSDRequestIDHeader"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:085"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "current.flow"}}, {"Get": {"name": "message.header.X-Request-ID"}}, {"Set": {"name": "message.header.NHSD-Request-ID", "success": true, "value": ""}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.Set.NHSDRequestIDHeader.timeTaken", "success": true, "value": "4109"}}]}]}, {"id": "FlowReturn", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "PreProxyFlowHook->PreProxySharedFlow"}]}, "timestamp": "04-11-21 14:51:08:085"}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(\"default\" equals proxy.name)"}, {"name": "Tree", "value": "PROXY_default"}]}, "timestamp": "04-11-21 14:51:08:085"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.edge.sharedflow.name", "success": true}}, {"Set": {"name": "apigee.edge.flowhook.name", "success": true}}, {"Get": {"name": "proxy.name", "value": "default"}}]}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "proxy.flow.name", "value": "PreFlow"}]}, "timestamp": "04-11-21 14:51:08:085"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "PreFlow"}]}, "timestamp": "04-11-21 14:51:08:085"}]}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "keyvaluemapoperations"}, {"name": "type", "value": "KeyValueMapOperationsExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "KeyValueMapOperations.GetIdentityServiceConfig"}, {"name": "stepDefinition-name", "value": "KeyValueMapOperations.GetIdentityServiceConfig"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:085"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.KeyValueMapOperations.GetIdentityServiceConfig.timeTaken", "success": true, "value": "20838"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "javascript-executionTime", "value": "0"}, {"name": "action", "value": "CONTINUE"}, {"name": "javascript-timeLimit", "value": "200"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "javascript"}, {"name": "javascript-name", "value": "UnpackVars.js"}, {"name": "type", "value": "JavascriptStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "Javascript.UnpackVars"}, {"name": "stepDefinition-name", "value": "Javascript.UnpackVars"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:085"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "identity-service-config.cis2.access_token_expiry_ms", "success": true, "value": "600000"}}, {"Set": {"name": "identity-service-config.cis2.client_id", "success": true, "value": "test-client-1"}}, {"Set": {"name": "identity-service-config.cis2.refresh_token_expiry_ms", "success": true, "value": "3600000"}}, {"Set": {"name": "identity-service-config.cis2.refresh_tokens_validity_ms", "success": true, "value": "3600000"}}, {"Set": {"name": "identity-service-config.cis2.simulated_idp", "success": true, "value": "false"}}, {"Set": {"name": "identity-service-config.cis2.issuer", "success": true, "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock"}}, {"Set": {"name": "identity-service-config.cis2.access_token_path", "success": true, "value": "/auth/realms/cis2-mock/protocol/openid-connect/token"}}, {"Set": {"name": "identity-service-config.cis2.jwks_path", "success": true, "value": "/auth/realms/cis2-mock/protocol/openid-connect/certs"}}, {"Set": {"name": "identity-service-config.cis2.redirect_uri", "success": true, "value": "https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback"}}, {"Set": {"name": "identity-service-config.cis2.authorize_endpoint", "success": true, "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth"}}, {"Set": {"name": "identity-service-config.cis2.userinfo_path", "success": true, "value": "/auth/realms/cis2-mock/protocol/openid-connect"}}, {"Set": {"name": "identity-service-config.cis2.backchannel_allowed_ips", "success": true, "value": "[{\"address\": \"0.0.0.0\", \"mask\": \"1\"}, {\"address\": \"128.0.0.0\", \"mask\": \"1\"}]"}}, {"Set": {"name": "identity-service-config.nhs_login.jwks_path", "success": true, "value": "/mock-nhsid-jwks/identity-service/nhs-login-jwks"}}, {"Set": {"name": "identity-service-config.nhs_login.client_id", "success": true, "value": "some-client-id"}}, {"Set": {"name": "identity-service-config.nhs_login.issuer", "success": true, "value": "https://internal-dev.api.service.nhs.uk"}}, {"Set": {"name": "identity-service-config.nhs_login.audience", "success": true, "value": "https://internal-dev.api.service.nhs.uk/mock-nhsid-jwks/nhs_login_simulated_token"}}, {"Set": {"name": "identity-service-config.nhs_login.authorize_endpoint", "success": true, "value": "https://internal-dev.api.service.nhs.uk/mock-nhsid-jwks/nhs_login_simulated_auth"}}, {"Set": {"name": "identity-service-config.nhs_login.access_token_path", "success": true, "value": "/mock-nhsid-jwks/nhs_login_simulated_token"}}, {"Set": {"name": "identity-service-config.nhs_login.kid", "success": true, "value": "test-1"}}, {"Set": {"name": "identity-service-config.nhs_login.redirect_uri", "success": true, "value": "https://internal-dev.api.service.nhs.uk/oauth2/callback"}}, {"Set": {"name": "apigee.metrics.policy.Javascript.UnpackVars.timeTaken", "success": true, "value": "201822"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.setIDPvar"}, {"name": "stepDefinition-name", "value": "AssignMessage.setIDPvar"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:086"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "idp", "success": true, "value": "null"}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.setIDPvar.timeTaken", "success": true, "value": "7412"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "expression", "value": "(apim.feature_toggles.enable-nhs-login-combined-auth equals true)"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "true"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.ExtractExternalScope"}, {"name": "stepDefinition-name", "value": "AssignMessage.ExtractExternalScope"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:086"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "request.queryparam.scope"}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.ExtractExternalScope.timeTaken", "success": true, "value": "4336"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.RemoveExternalScope"}, {"name": "stepDefinition-name", "value": "AssignMessage.RemoveExternalScope"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:086"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.AssignMessage.RemoveExternalScope.timeTaken", "success": true, "value": "3868"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "Set APIM Guids"}, {"name": "stepDefinition-name", "value": "AssignMessage.SetApimGuids"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:086"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apim.api_guid", "success": true, "value": "d5a3f4fc-e61f-41f3-ab72-16aa5ef3ff2b"}}, {"Set": {"name": "apim.api_spec_guid", "success": true, "value": ""}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.SetApimGuids.timeTaken", "success": true, "value": "3929"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /_ping and ((request.verb equals \"GET\") or (request.verb equals \"HEAD\")))"}, {"name": "Tree", "value": "AddPayloadToPing_REQUEST_FLOW"}]}, "timestamp": "04-11-21 14:51:08:086"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /authorize and (request.verb equals \"GET\"))"}, {"name": "Tree", "value": "Flow.GetAuthorization_REQUEST_FLOW"}]}, "timestamp": "04-11-21 14:51:08:086"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /token and ((request.verb equals \"POST\") and ((request.formparam.grant_type equals \"client_credentials\") and (request.formparam.subject_token_type not equals \"urn:ietf:params:oauth:token-type:id_token\"))))"}, {"name": "Tree", "value": "Flow.PostTokenClientCredentials_REQUEST_FLOW"}]}, "timestamp": "04-11-21 14:51:08:086"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /token and ((request.verb equals \"POST\") and ((request.formparam.subject_token_type equals \"urn:ietf:params:oauth:token-type:id_token\") and (apim.feature_toggles.enable-token-exchange equals true))))"}, {"name": "Tree", "value": "Flow.PostTokenTokenExchange_REQUEST_FLOW"}]}, "timestamp": "04-11-21 14:51:08:086"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /backchannel_logout and (request.verb equals \"POST\"))"}, {"name": "Tree", "value": "Flow.BackChannelLogout_REQUEST_FLOW"}]}, "timestamp": "04-11-21 14:51:08:086"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /token and ((request.verb equals \"POST\") and (request.formparam.grant_type equals \"authorization_code\")))"}, {"name": "Tree", "value": "Flow.PostTokenAuthorizationCode_REQUEST_FLOW"}]}, "timestamp": "04-11-21 14:51:08:086"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /token and ((request.verb equals \"POST\") and (request.formparam.grant_type equals \"refresh_token\")))"}, {"name": "Tree", "value": "Flow.PostRefreshToken_REQUEST_FLOW"}]}, "timestamp": "04-11-21 14:51:08:086"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /callback and (request.verb equals \"GET\"))"}, {"name": "Tree", "value": "Flow.GetCallback_REQUEST_FLOW"}]}, "timestamp": "04-11-21 14:51:08:086"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /userinfo and (request.verb equals \"GET\"))"}, {"name": "Tree", "value": "Flow.GetUserInfo_REQUEST_FLOW"}]}, "timestamp": "04-11-21 14:51:08:086"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}, {"Get": {"name": "request.verb", "value": "GET"}}]}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "proxy.flow.name", "value": "Flow.GetUserInfo"}, {"name": "proxy.flow.description", "value": ""}]}, "timestamp": "04-11-21 14:51:08:086"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "Flow.GetUserInfo"}, {"name": "current.flow.description", "value": ""}]}, "timestamp": "04-11-21 14:51:08:086"}]}, {"id": "Paused", "results": []}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "oauthV2.OAuthV2.VerifyAccessToken.failed", "value": "false"}, {"name": "oauthV2.OAuthV2.VerifyAccessToken.fault.name", "value": ""}, {"name": "oauthV2.OAuthV2.VerifyAccessToken.fault.cause", "value": ""}]}, "timestamp": "04-11-21 14:51:08:088"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "Identifier", "value": "app"}]}, "timestamp": "04-11-21 14:51:08:088"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "Identifier", "value": "developer"}]}, "timestamp": "04-11-21 14:51:08:088"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "oauthV2"}, {"name": "type", "value": "VerifyAccessTokenStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "OAuthV2.VerifyAccessToken"}, {"name": "stepDefinition-name", "value": "OAuthV2.VerifyAccessToken"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:088"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "oauthV2.OAuthV2.VerifyAccessToken"}}, {"Get": {"name": "flow.resource.name"}}, {"Get": {"name": "environment.name", "value": "internal-dev"}}, {"Get": {"name": "apiproxy.name", "value": "identity-service-pr-251"}}, {"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}, {"Set": {"name": "refresh_token_expires_in", "success": true, "value": "3599"}}, {"Set": {"name": "accesstoken.id_token-amr", "success": true, "value": "[N3_SMARTCARD]"}}, {"Set": {"name": "apiproduct.ratelimit", "success": true, "value": "1000ps"}}, {"Set": {"name": "accesstoken.external_access_token", "success": true, "value": "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJKY3lCTU9LRDF2RnhJSDBoWVJ6Yktrc3V2d3QyNEl3dEhFSU5wS3JKelpZIn0.eyJleHAiOjE2MzYwMzc3NjYsImlhdCI6MTYzNjAzNzQ2NiwiYXV0aF90aW1lIjoxNjM2MDM3NDY2LCJqdGkiOiI1OWNlZjg3NC02N2Q4LTRlMDAtODMwNy1mNTUyNjNhZGNhOWEiLCJpc3MiOiJodHRwczovL2lkZW50aXR5LnB0bC5hcGkucGxhdGZvcm0ubmhzLnVrL2F1dGgvcmVhbG1zL2NpczItbW9jayIsInN1YiI6IjQyM2RmZjY3LWUwODUtNGIwNC04NDdmLTQ5MDE1NmJjNzY5MyIsInR5cCI6IkJlYXJlciIsImF6cCI6InRlc3QtY2xpZW50LTEiLCJzZXNzaW9uX3N0YXRlIjoiMjNmNmRmNDItYWI5Ni00MzQ4LWI1ZDMtMjY5NjA4OWRlZGEwIiwiYWNyIjoiMSIsInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgbmF0aW9uYWxyYmFjYWNjZXNzIGVtYWlsIiwic2lkIjoiMjNmNmRmNDItYWI5Ni00MzQ4LWI1ZDMtMjY5NjA4OWRlZGEwIiwiYWNyIjoiQUFMM19BTlkiLCJhdWRpdFRyYWNraW5nSWQiOiI5MWY2OTRlNi0zNzQ5LTQyZmQtOTBiMC1ET05PVENIQU5HRS0xNTQ2MzkxIiwiYW1yIjpbIk4zX1NNQVJUQ0FSRCJdfQ.tmJHeYXKP3zZdsngkrO4csP7hGuOoGuvIYlrlK8pOIv_JV7uxVcvtQbpaM9rze-gn3vllccrHML68bC56UIp1p13lDd3UxajyEQdaYxUKEWGHEpM43di5Gsb4oXZXL45Cq-003ykUZjtvvsASHV_Aiw0kC6quhiRjhUKAFJrgbRTh6jxz0YJr8EfHNR0TL8dRqQAFGJeSM0u0aF6ltSZ9X3LHWogyRgMyOe96wFLV54C4lkNnbvkLudMJ282p0JalfV1LMpWXj0hHnS-_IdrLxBT_WxI1u9OKtHvwPxtbCfRJ69VmIDIC07ib8kO94QEPCSjOyGvi-a2x1Jzi2et2A"}}, {"Set": {"name": "accesstoken.auth_level", "success": true, "value": "aal3"}}, {"Set": {"name": "token_type", "success": true, "value": "BearerToken"}}, {"Set": {"name": "issued_at", "success": true, "value": "1636037467632"}}, {"Set": {"name": "client_id", "success": true, "value": "8z3lF1KOiIRvua1g5GXvpp5G76BUQazx"}}, {"Set": {"name": "accesstoken.id_token", "success": true, "value": "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJKY3lCTU9LRDF2RnhJSDBoWVJ6Yktrc3V2d3QyNEl3dEhFSU5wS3JKelpZIn0.eyJleHAiOjE2MzYwMzc3NjYsImlhdCI6MTYzNjAzNzQ2NiwiYXV0aF90aW1lIjoxNjM2MDM3NDY2LCJqdGkiOiJlOTQxMmQyZC00N2MzLTRiMTAtYTU5YS1jNTUwNTUzZjFjNjEiLCJpc3MiOiJodHRwczovL2lkZW50aXR5LnB0bC5hcGkucGxhdGZvcm0ubmhzLnVrL2F1dGgvcmVhbG1zL2NpczItbW9jayIsImF1ZCI6InRlc3QtY2xpZW50LTEiLCJzdWIiOiI0MjNkZmY2Ny1lMDg1LTRiMDQtODQ3Zi00OTAxNTZiYzc2OTMiLCJ0eXAiOiJJRCIsImF6cCI6InRlc3QtY2xpZW50LTEiLCJzZXNzaW9uX3N0YXRlIjoiMjNmNmRmNDItYWI5Ni00MzQ4LWI1ZDMtMjY5NjA4OWRlZGEwIiwiYXRfaGFzaCI6IkJybHl6bzg2Q09FODk5VUc2ZGxNd2ciLCJhY3IiOiIxIiwic2lkIjoiMjNmNmRmNDItYWI5Ni00MzQ4LWI1ZDMtMjY5NjA4OWRlZGEwIiwiYWNyIjoiQUFMM19BTlkiLCJhdWRpdFRyYWNraW5nSWQiOiI5MWY2OTRlNi0zNzQ5LTQyZmQtOTBiMC1ET05PVENIQU5HRS0xNTQ2MzkxIiwiYW1yIjpbIk4zX1NNQVJUQ0FSRCJdfQ.L2bi1o1uFLi2A65r069mBxw0GWqRnwdX1wNwK39Tt0jmbhNlMXJ5cRZGDkvzkrnIsCFJa6kZyvV8UybQl36lQLYYft5UT8XYXonE9buwMTw2UtfoGlJ6m99iKe2XjtmVLRGSiJX_3jM6Y6eYiecWIT4kjP79V5dpLe8AMwoSgnkxyXsDyo6K-Lc0xm6EOQ_9CLZmPbKDnaB2gdSlicmgsRbAh3gkj45KaRAi0_MW6UMIghO9RD8IQdazo4-sFOSc9LeyOpu2wtQdrXcdHLu9Sn_C3RRlMBfCkVVOSCMKUt-ea7_Zhab1EB2IwmOimK94P7hbkmRr0NSw2nIsDjfggg"}}, {"Set": {"name": "developer.app.id", "success": true, "value": "d93681cd-e785-4180-9282-7621420b2fac"}}, {"Set": {"name": "developer.id", "success": true, "value": "nhsd-nonprod@@@ba00a768-3783-46f6-bf41-4033d2bf669d"}}, {"Set": {"name": "accesstoken.issuer", "success": true, "value": "https://internal-dev.api.service.nhs.uk/oauth2-pr-251"}}, {"Set": {"name": "developer.app.name", "success": true, "value": "apim-auto-c1f392ee-9e5c-4abf-b662-21e88546b8ac"}}, {"Set": {"name": "accesstoken.id_token-acr", "success": true, "value": "AAL3_ANY"}}, {"Set": {"name": "grant_type", "success": true, "value": "authorization_code"}}, {"Set": {"name": "accesstoken.auth_type", "success": true, "value": "user"}}, {"Set": {"name": "scope", "success": true, "value": "urn:nhsd:apim:user-nhs-id:aal3:personal-demographics-service"}}, {"Set": {"name": "accesstoken.auth_user_id", "success": true, "value": "423dff67-e085-4b04-847f-490156bc7693"}}, {"Set": {"name": "refresh_token_issued_at", "success": true, "value": "1636037467632"}}, {"Set": {"name": "accesstoken._first_issued", "success": true, "value": "1636037467630"}}, {"Set": {"name": "expires_in", "success": true, "value": "4"}}, {"Set": {"name": "apiproduct.access", "success": true, "value": "public"}}, {"Set": {"name": "apiproduct.developer.quota.timeunit", "success": true, "value": "minute"}}, {"Set": {"name": "app", "success": true, "value": "d93681cd-e785-4180-9282-7621420b2fac"}}, {"Set": {"name": "apiproduct.developer.quota.limit", "success": true, "value": "60000"}}, {"Set": {"name": "refresh_token_status", "success": true, "value": "approved"}}, {"Set": {"name": "apiproduct.developer.quota.interval", "success": true, "value": "1"}}, {"Set": {"name": "apiproduct.name", "success": true, "value": "apim-auto-d8fcd097-70a2-4855-a5ed-38d32918e42b"}}, {"Set": {"name": "organization_name", "success": true, "value": "nhsd-nonprod"}}, {"Set": {"name": "developer.email", "success": true, "value": "apm-testing-internal-dev@nhs.net"}}, {"Set": {"name": "access_token", "success": true, "value": "jWMyiKoedAP9d98QWGaZgOBU9LjH"}}, {"Set": {"name": "accesstoken.id_token-issuer", "success": true, "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock"}}, {"Set": {"name": "refresh_token", "success": true, "value": "ErTo4zxxAGoNVkErmLma67cjwKJgAoVk"}}, {"Set": {"name": "accesstoken.auth_provider", "success": true, "value": "nhs-cis2"}}, {"Set": {"name": "accesstoken.auth_grant_type", "success": true, "value": "authorization_code"}}, {"Set": {"name": "accesstoken.id_token-subject", "success": true, "value": "423dff67-e085-4b04-847f-490156bc7693"}}, {"Set": {"name": "status", "success": true, "value": "approved"}}, {"Set": {"name": "apigee.client_id", "success": true, "value": "8z3lF1KOiIRvua1g5GXvpp5G76BUQazx"}}, {"Set": {"name": "apigee.developer.id", "success": true, "value": "nhsd-nonprod@@@ba00a768-3783-46f6-bf41-4033d2bf669d"}}, {"Set": {"name": "apigee.developer.app.name", "success": true, "value": "apim-auto-c1f392ee-9e5c-4abf-b662-21e88546b8ac"}}, {"Set": {"name": "apigee.apiproduct.name", "success": true, "value": "apim-auto-d8fcd097-70a2-4855-a5ed-38d32918e42b"}}, {"Set": {"name": "apigee.developer.email", "success": true, "value": "apm-testing-internal-dev@nhs.net"}}, {"Set": {"name": "apigee.access_token", "success": true, "value": "jWMyiKoedAP9d98QWGaZgOBU9LjH"}}, {"Get": {"name": "organization.name", "value": "nhsd-nonprod"}}, {"Get": {"name": "organization.name", "value": "nhsd-nonprod"}}, {"Set": {"name": "oauthV2.failed", "success": true, "value": "false"}}, {"Get": {"name": "environment.name", "value": "internal-dev"}}, {"Get": {"name": "apiproxy.name", "value": "identity-service-pr-251"}}, {"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}, {"Set": {"name": "apigee.metrics.policy.OAuthV2.VerifyAccessToken.timeTaken", "success": true, "value": "1928519"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "flowcallout"}, {"name": "type", "value": "FlowCalloutStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "Apply Rate Limiting"}, {"name": "stepDefinition-name", "value": "FlowCallout.ApplyRatelimiting"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:088"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.FlowCallout.ApplyRatelimiting.timeTaken", "success": true, "value": "14077"}}]}]}, {"id": "FlowCallout", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "ApplyRateLimiting"}]}, "timestamp": "04-11-21 14:51:08:088"}]}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "javascript-executionTime", "value": "0"}, {"name": "action", "value": "CONTINUE"}, {"name": "javascript-timeLimit", "value": "200"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "javascript"}, {"name": "javascript-name", "value": "set-ratelimits.js"}, {"name": "type", "value": "JavascriptStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "Javascript.SetRatelimits"}, {"name": "stepDefinition-name", "value": "Javascript.SetRatelimits"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:088"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "verifyApiKeyPolicyName"}}, {"Get": {"name": "apiproxy.name", "value": "identity-service-pr-251"}}, {"Get": {"name": "apiproduct.developer.quota.limit", "value": "60000"}}, {"Get": {"name": "apiproduct.developer.quota.interval", "value": "1"}}, {"Get": {"name": "apiproduct.developer.quota.timeunit", "value": "minute"}}, {"Get": {"name": "apiproduct.ratelimit", "value": "1000ps"}}, {"Get": {"name": "ratelimiting", "value": "{\n    \"app\": {\n        \"quota\": {\n            \"enabled\": true,\n            \"interval\": 1,\n            \"limit\": 300,\n            \"timeunit\": \"minute\"\n        },\n        \"spikeArrest\": {\n            \"enabled\": false\n        }\n    },\n    \"proxy\": {\n        \"quota\": {\n            \"enabled\": false\n        },\n        \"spikeArrest\": {\n            \"enabled\": true,\n            \"ratelimit\": \"300000pm\"\n        }\n    }\n}"}}, {"Get": {"name": "app.ratelimiting"}}, {"Get": {"name": "apiproduct.ratelimiting"}}, {"Get": {"name": "ratelimiting", "value": "{\n    \"app\": {\n        \"quota\": {\n            \"enabled\": true,\n            \"interval\": 1,\n            \"limit\": 300,\n            \"timeunit\": \"minute\"\n        },\n        \"spikeArrest\": {\n            \"enabled\": false\n        }\n    },\n    \"proxy\": {\n        \"quota\": {\n            \"enabled\": false\n        },\n        \"spikeArrest\": {\n            \"enabled\": true,\n            \"ratelimit\": \"300000pm\"\n        }\n    }\n}"}}, {"Set": {"name": "proxy_quota_enabled", "success": true, "value": "false"}}, {"Set": {"name": "proxy_spikeArrest_enabled", "success": true, "value": "true"}}, {"Set": {"name": "proxy_spikeArrest_ratelimit", "success": true, "value": "300000pm"}}, {"Set": {"name": "app_quota_limit", "success": true, "value": "300"}}, {"Set": {"name": "app_quota_interval", "success": true, "value": "1"}}, {"Set": {"name": "app_quota_timeunit", "success": true, "value": "minute"}}, {"Set": {"name": "app_quota_enabled", "success": true, "value": "true"}}, {"Set": {"name": "app_spikeArrest_ratelimit", "success": true, "value": "1000ps"}}, {"Set": {"name": "app_spikeArrest_enabled", "success": true, "value": "false"}}, {"Set": {"name": "apigee.metrics.policy.Javascript.SetRatelimits.timeTaken", "success": true, "value": "224554"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Paused", "results": []}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ratelimit.QuotaPerApp.expiry.time", "value": "1636037468089"}, {"name": "ratelimit.QuotaPerApp.failed", "value": "false"}, {"name": "ratelimit.QuotaPerApp.datastore.fail.open", "value": "false"}, {"name": "ratelimit.QuotaPerApp.class.total.exceed.count", "value": "0"}, {"name": "ratelimit.QuotaPerApp.allowed.count", "value": "300"}, {"name": "ratelimit.QuotaPerApp.fault.name", "value": ""}, {"name": "ratelimit.QuotaPerApp.class.used.count", "value": "0"}, {"name": "ratelimit.QuotaPerApp.class.available.count", "value": "0"}, {"name": "ratelimit.QuotaPerApp.total.exceed.count", "value": "0"}, {"name": "ratelimit.QuotaPerApp.class.allowed.count", "value": "0"}, {"name": "ratelimit.QuotaPerApp.used.count", "value": "4"}, {"name": "ratelimit.QuotaPerApp.identifier", "value": "d93681cd-e785-4180-9282-7621420b2fac"}, {"name": "ratelimit.QuotaPerApp.exceed.count", "value": "0"}, {"name": "ratelimit.QuotaPerApp.class.exceed.count", "value": "0"}, {"name": "ratelimit.QuotaPerApp.available.count", "value": "296"}, {"name": "ratelimit.QuotaPerApp.fault.cause", "value": ""}]}, "timestamp": "04-11-21 14:51:08:093"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "Quota"}, {"name": "expression", "value": "(app_quota_enabled equals true)"}, {"name": "type", "value": "RateLimitExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "true"}, {"name": "expressionResult", "value": "true"}, {"name": "stepDefinition-displayName", "value": "Quota Per App"}, {"name": "stepDefinition-name", "value": "QuotaPerApp"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:093"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "app_quota_interval", "value": "1"}}, {"Get": {"name": "app_quota_timeunit", "value": "minute"}}, {"Get": {"name": "developer.app.id", "value": "d93681cd-e785-4180-9282-7621420b2fac"}}, {"Get": {"name": "app_quota_limit", "value": "300"}}, {"Set": {"name": "apigee.metrics.policy.QuotaPerApp.timeTaken", "success": true, "value": "3956583"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "raisefault"}, {"name": "expression", "value": "(ratelimit.QuotaPerApp.failed equals true)"}, {"name": "type", "value": "RaiseFaultExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "RaiseFault.QuotaPerApp"}, {"name": "stepDefinition-name", "value": "RaiseFault.QuotaPerApp"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:093"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "app_quota_interval", "value": "1"}}, {"Get": {"name": "app_quota_timeunit", "value": "minute"}}, {"Get": {"name": "developer.app.id", "value": "d93681cd-e785-4180-9282-7621420b2fac"}}, {"Get": {"name": "app_quota_limit", "value": "300"}}, {"Set": {"name": "apigee.metrics.policy.QuotaPerApp.timeTaken", "success": true, "value": "3956583"}}, {"Get": {"name": "ratelimit.QuotaPerApp.failed", "value": "false"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "SpikeArrest"}, {"name": "expression", "value": "(app_spikeArrest_enabled equals true)"}, {"name": "type", "value": "RateLimitExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "true"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "Per-app Spike Arrest"}, {"name": "stepDefinition-name", "value": "SpikeArrestPerApp"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:093"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "app_spikeArrest_enabled", "value": "false"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "raisefault"}, {"name": "expression", "value": "(ratelimit.SpikeArrestPerApp.failed equals true)"}, {"name": "type", "value": "RaiseFaultExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "RaiseFault.SpikeArrestPerApp"}, {"name": "stepDefinition-name", "value": "RaiseFault.SpikeArrestPerApp"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:093"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "ratelimit.SpikeArrestPerApp.failed"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "Quota"}, {"name": "expression", "value": "(proxy_quota_enabled equals true)"}, {"name": "type", "value": "RateLimitExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "true"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "Quota Per Proxy"}, {"name": "stepDefinition-name", "value": "QuotaPerProxy"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:093"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy_quota_enabled", "value": "false"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "raisefault"}, {"name": "expression", "value": "(ratelimit.QuotaPerProxy.failed equals true)"}, {"name": "type", "value": "RaiseFaultExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "RaiseFault.QuotaPerProxy"}, {"name": "stepDefinition-name", "value": "RaiseFault.QuotaPerProxy"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:093"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "ratelimit.QuotaPerProxy.failed"}}]}]}, {"id": "Paused", "results": []}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ratelimit.SpikeArrestPerProxy.allowed.count", "value": "300000"}, {"name": "ratelimit.SpikeArrestPerProxy.fault.name", "value": ""}, {"name": "ratelimit.SpikeArrestPerProxy.fault.cause", "value": ""}, {"name": "ratelimit.SpikeArrestPerProxy.expiry.time", "value": "0"}, {"name": "ratelimit.SpikeArrestPerProxy.datastore.fail.open", "value": "false"}, {"name": "ratelimit.SpikeArrestPerProxy.identifier", "value": "nhsd-nonprod@@@internal-dev@@@identity-service-pr-251@@@SpikeArrestPerProxy@@@nondistributed@@@_default"}, {"name": "ratelimit.SpikeArrestPerProxy.available.count", "value": "299998"}, {"name": "ratelimit.SpikeArrestPerProxy.used.count", "value": "2"}, {"name": "ratelimit.SpikeArrestPerProxy.total.exceed.count", "value": "0"}, {"name": "ratelimit.SpikeArrestPerProxy.class.available.count", "value": "0"}, {"name": "ratelimit.SpikeArrestPerProxy.class.total.exceed.count", "value": "0"}, {"name": "ratelimit.SpikeArrestPerProxy.exceed.count", "value": "0"}, {"name": "ratelimit.SpikeArrestPerProxy.class.exceed.count", "value": "0"}, {"name": "ratelimit.SpikeArrestPerProxy.failed", "value": "false"}, {"name": "ratelimit.SpikeArrestPerProxy.class.allowed.count", "value": "0"}, {"name": "ratelimit.SpikeArrestPerProxy.class.used.count", "value": "0"}]}, "timestamp": "04-11-21 14:51:08:093"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "SpikeArrest"}, {"name": "expression", "value": "(proxy_spikeArrest_enabled equals true)"}, {"name": "type", "value": "RateLimitExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "true"}, {"name": "stepDefinition-displayName", "value": "Per-proxy Spike Arrest"}, {"name": "stepDefinition-name", "value": "SpikeArrestPerProxy"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:093"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy_spikeArrest_ratelimit", "value": "300000pm"}}, {"Set": {"name": "apigee.metrics.policy.SpikeArrestPerProxy.timeTaken", "success": true, "value": "43220"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "raisefault"}, {"name": "expression", "value": "(ratelimit.SpikeArrestPerProxy.failed equals true)"}, {"name": "type", "value": "RaiseFaultExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "RaiseFault.SpikeArrestPerProxy"}, {"name": "stepDefinition-name", "value": "RaiseFault.SpikeArrestPerProxy"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:093"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy_spikeArrest_ratelimit", "value": "300000pm"}}, {"Set": {"name": "apigee.metrics.policy.SpikeArrestPerProxy.timeTaken", "success": true, "value": "43220"}}, {"Get": {"name": "ratelimit.SpikeArrestPerProxy.failed", "value": "false"}}]}]}, {"id": "FlowReturn", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "ApplyRateLimiting"}]}, "timestamp": "04-11-21 14:51:08:093"}]}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "javascript-executionTime", "value": "0"}, {"name": "action", "value": "CONTINUE"}, {"name": "javascript-timeLimit", "value": "200"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "javascript"}, {"name": "javascript-name", "value": "check-apigee-access-token-attributes.js"}, {"name": "type", "value": "JavascriptStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "Javascript.CheckApigeeAccessTokenAttributes"}, {"name": "stepDefinition-name", "value": "Javascript.CheckApigeeAccessTokenAttributes"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:094"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "accesstoken.id_token-issuer", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock"}}, {"Set": {"name": "idTokenIssuer", "success": true, "value": "nhsCis2"}}, {"Set": {"name": "InvalidIdTokenIssuer", "success": true, "value": "false"}}, {"Set": {"name": "apigee.metrics.policy.Javascript.CheckApigeeAccessTokenAttributes.timeTaken", "success": true, "value": "209542"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "raisefault"}, {"name": "expression", "value": "((idTokenIssuer equals \"nhsLogin\") or ((InvalidIdTokenIssuer equals \"true\") or (accesstoken.external_access_token equals null)))"}, {"name": "type", "value": "RaiseFaultExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "RaiseFault.NotFound"}, {"name": "stepDefinition-name", "value": "RaiseFault.NotFound"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:094"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "accesstoken.id_token-issuer", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock"}}, {"Set": {"name": "idTokenIssuer", "success": true, "value": "nhsCis2"}}, {"Set": {"name": "InvalidIdTokenIssuer", "success": true, "value": "false"}}, {"Set": {"name": "apigee.metrics.policy.Javascript.CheckApigeeAccessTokenAttributes.timeTaken", "success": true, "value": "209542"}}, {"Get": {"name": "idTokenIssuer", "value": "nhsCis2"}}, {"Get": {"name": "InvalidIdTokenIssuer", "value": "false"}}, {"Get": {"name": "accesstoken.external_access_token", "value": "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJKY3lCTU9LRDF2RnhJSDBoWVJ6Yktrc3V2d3QyNEl3dEhFSU5wS3JKelpZIn0.eyJleHAiOjE2MzYwMzc3NjYsImlhdCI6MTYzNjAzNzQ2NiwiYXV0aF90aW1lIjoxNjM2MDM3NDY2LCJqdGkiOiI1OWNlZjg3NC02N2Q4LTRlMDAtODMwNy1mNTUyNjNhZGNhOWEiLCJpc3MiOiJodHRwczovL2lkZW50aXR5LnB0bC5hcGkucGxhdGZvcm0ubmhzLnVrL2F1dGgvcmVhbG1zL2NpczItbW9jayIsInN1YiI6IjQyM2RmZjY3LWUwODUtNGIwNC04NDdmLTQ5MDE1NmJjNzY5MyIsInR5cCI6IkJlYXJlciIsImF6cCI6InRlc3QtY2xpZW50LTEiLCJzZXNzaW9uX3N0YXRlIjoiMjNmNmRmNDItYWI5Ni00MzQ4LWI1ZDMtMjY5NjA4OWRlZGEwIiwiYWNyIjoiMSIsInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgbmF0aW9uYWxyYmFjYWNjZXNzIGVtYWlsIiwic2lkIjoiMjNmNmRmNDItYWI5Ni00MzQ4LWI1ZDMtMjY5NjA4OWRlZGEwIiwiYWNyIjoiQUFMM19BTlkiLCJhdWRpdFRyYWNraW5nSWQiOiI5MWY2OTRlNi0zNzQ5LTQyZmQtOTBiMC1ET05PVENIQU5HRS0xNTQ2MzkxIiwiYW1yIjpbIk4zX1NNQVJUQ0FSRCJdfQ.tmJHeYXKP3zZdsngkrO4csP7hGuOoGuvIYlrlK8pOIv_JV7uxVcvtQbpaM9rze-gn3vllccrHML68bC56UIp1p13lDd3UxajyEQdaYxUKEWGHEpM43di5Gsb4oXZXL45Cq-003ykUZjtvvsASHV_Aiw0kC6quhiRjhUKAFJrgbRTh6jxz0YJr8EfHNR0TL8dRqQAFGJeSM0u0aF6ltSZ9X3LHWogyRgMyOe96wFLV54C4lkNnbvkLudMJ282p0JalfV1LMpWXj0hHnS-_IdrLxBT_WxI1u9OKtHvwPxtbCfRJ69VmIDIC07ib8kO94QEPCSjOyGvi-a2x1Jzi2et2A"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.SetAuthorizationHeader"}, {"name": "stepDefinition-name", "value": "AssignMessage.SetAuthorizationHeader"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:094"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "accesstoken.external_access_token", "value": "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJKY3lCTU9LRDF2RnhJSDBoWVJ6Yktrc3V2d3QyNEl3dEhFSU5wS3JKelpZIn0.eyJleHAiOjE2MzYwMzc3NjYsImlhdCI6MTYzNjAzNzQ2NiwiYXV0aF90aW1lIjoxNjM2MDM3NDY2LCJqdGkiOiI1OWNlZjg3NC02N2Q4LTRlMDAtODMwNy1mNTUyNjNhZGNhOWEiLCJpc3MiOiJodHRwczovL2lkZW50aXR5LnB0bC5hcGkucGxhdGZvcm0ubmhzLnVrL2F1dGgvcmVhbG1zL2NpczItbW9jayIsInN1YiI6IjQyM2RmZjY3LWUwODUtNGIwNC04NDdmLTQ5MDE1NmJjNzY5MyIsInR5cCI6IkJlYXJlciIsImF6cCI6InRlc3QtY2xpZW50LTEiLCJzZXNzaW9uX3N0YXRlIjoiMjNmNmRmNDItYWI5Ni00MzQ4LWI1ZDMtMjY5NjA4OWRlZGEwIiwiYWNyIjoiMSIsInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgbmF0aW9uYWxyYmFjYWNjZXNzIGVtYWlsIiwic2lkIjoiMjNmNmRmNDItYWI5Ni00MzQ4LWI1ZDMtMjY5NjA4OWRlZGEwIiwiYWNyIjoiQUFMM19BTlkiLCJhdWRpdFRyYWNraW5nSWQiOiI5MWY2OTRlNi0zNzQ5LTQyZmQtOTBiMC1ET05PVENIQU5HRS0xNTQ2MzkxIiwiYW1yIjpbIk4zX1NNQVJUQ0FSRCJdfQ.tmJHeYXKP3zZdsngkrO4csP7hGuOoGuvIYlrlK8pOIv_JV7uxVcvtQbpaM9rze-gn3vllccrHML68bC56UIp1p13lDd3UxajyEQdaYxUKEWGHEpM43di5Gsb4oXZXL45Cq-003ykUZjtvvsASHV_Aiw0kC6quhiRjhUKAFJrgbRTh6jxz0YJr8EfHNR0TL8dRqQAFGJeSM0u0aF6ltSZ9X3LHWogyRgMyOe96wFLV54C4lkNnbvkLudMJ282p0JalfV1LMpWXj0hHnS-_IdrLxBT_WxI1u9OKtHvwPxtbCfRJ69VmIDIC07ib8kO94QEPCSjOyGvi-a2x1Jzi2et2A"}}, {"Set": {"name": "message.header.Authorization", "success": true, "value": "Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJKY3lCTU9LRDF2RnhJSDBoWVJ6Yktrc3V2d3QyNEl3dEhFSU5wS3JKelpZIn0.eyJleHAiOjE2MzYwMzc3NjYsImlhdCI6MTYzNjAzNzQ2NiwiYXV0aF90aW1lIjoxNjM2MDM3NDY2LCJqdGkiOiI1OWNlZjg3NC02N2Q4LTRlMDAtODMwNy1mNTUyNjNhZGNhOWEiLCJpc3MiOiJodHRwczovL2lkZW50aXR5LnB0bC5hcGkucGxhdGZvcm0ubmhzLnVrL2F1dGgvcmVhbG1zL2NpczItbW9jayIsInN1YiI6IjQyM2RmZjY3LWUwODUtNGIwNC04NDdmLTQ5MDE1NmJjNzY5MyIsInR5cCI6IkJlYXJlciIsImF6cCI6InRlc3QtY2xpZW50LTEiLCJzZXNzaW9uX3N0YXRlIjoiMjNmNmRmNDItYWI5Ni00MzQ4LWI1ZDMtMjY5NjA4OWRlZGEwIiwiYWNyIjoiMSIsInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgbmF0aW9uYWxyYmFjYWNjZXNzIGVtYWlsIiwic2lkIjoiMjNmNmRmNDItYWI5Ni00MzQ4LWI1ZDMtMjY5NjA4OWRlZGEwIiwiYWNyIjoiQUFMM19BTlkiLCJhdWRpdFRyYWNraW5nSWQiOiI5MWY2OTRlNi0zNzQ5LTQyZmQtOTBiMC1ET05PVENIQU5HRS0xNTQ2MzkxIiwiYW1yIjpbIk4zX1NNQVJUQ0FSRCJdfQ.tmJHeYXKP3zZdsngkrO4csP7hGuOoGuvIYlrlK8pOIv_JV7uxVcvtQbpaM9rze-gn3vllccrHML68bC56UIp1p13lDd3UxajyEQdaYxUKEWGHEpM43di5Gsb4oXZXL45Cq-003ykUZjtvvsASHV_Aiw0kC6quhiRjhUKAFJrgbRTh6jxz0YJr8EfHNR0TL8dRqQAFGJeSM0u0aF6ltSZ9X3LHWogyRgMyOe96wFLV54C4lkNnbvkLudMJ282p0JalfV1LMpWXj0hHnS-_IdrLxBT_WxI1u9OKtHvwPxtbCfRJ69VmIDIC07ib8kO94QEPCSjOyGvi-a2x1Jzi2et2A"}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.SetAuthorizationHeader.timeTaken", "success": true, "value": "18813"}}]}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "proxy.flow.name", "value": "PostFlow"}]}, "timestamp": "04-11-21 14:51:08:094"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "PostFlow"}]}, "timestamp": "04-11-21 14:51:08:094"}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /_ping and ((request.verb equals \"GET\") or (request.verb equals \"HEAD\")))"}, {"name": "Tree", "value": "TARGET_SELECTOR"}]}, "timestamp": "04-11-21 14:51:08:094"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /userinfo and (request.verb equals \"GET\"))"}, {"name": "Tree", "value": "TARGET_SELECTOR"}]}, "timestamp": "04-11-21 14:51:08:094"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}, {"Get": {"name": "request.verb", "value": "GET"}}]}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "route.name", "value": "userinfoRoute"}, {"name": "route.target", "value": "identity-server-userinfo"}]}, "timestamp": "04-11-21 14:51:08:094"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "target.basepath.with.query", "value": "/auth/realms/cis2-mock/protocol/openid-connect"}, {"name": "target.copy.queryparams", "value": "true"}, {"name": "target.copy.pathsuffix", "value": "true"}, {"name": "target.basepath", "value": "{identity-service-config.cis2.userinfo_path}"}, {"name": "target.name", "value": "identity-server-userinfo"}]}, "timestamp": "04-11-21 14:51:08:094"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "targetURL", "value": "-NA-"}, {"name": "targetBasePath", "value": "{identity-service-config.cis2.userinfo_path}"}, {"name": "targetRequestSender", "value": "LBTargetRequestSender"}, {"name": "targetEndpoint", "value": "identity-server-userinfo{Organization=nhsd-nonprodEnvironment=internal-dev,Application=identity-service-pr-251__14}"}]}, "timestamp": "04-11-21 14:51:08:094"}]}, {"id": "StateChange", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "To", "value": "TARGET_REQ_FLOW"}, {"name": "From", "value": "PROXY_REQ_FLOW"}]}, "timestamp": "04-11-21 14:51:08:094"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(\"identity-server-userinfo\" equals target.name)"}, {"name": "Tree", "value": "TARGET_identity-server-userinfo"}]}, "timestamp": "04-11-21 14:51:08:094"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "target.name", "value": "identity-server-userinfo"}}]}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "target.flow.name", "value": "PreFlow"}]}, "timestamp": "04-11-21 14:51:08:094"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "PreFlow"}]}, "timestamp": "04-11-21 14:51:08:094"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "target.flow.name", "value": "PostFlow"}]}, "timestamp": "04-11-21 14:51:08:094"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "PostFlow"}]}, "timestamp": "04-11-21 14:51:08:094"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "type", "value": "FlowHookAction"}]}, "timestamp": "04-11-21 14:51:08:094"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": []}]}, {"id": "FlowCallout", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "PreTargetFlowHook->PreTargetSharedFlow"}]}, "timestamp": "04-11-21 14:51:08:094"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.RemoveApimServiceHeader"}, {"name": "stepDefinition-name", "value": "AssignMessage.RemoveApimServiceHeader"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:094"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "*/*"}, {"name": "Accept-Encoding", "value": "gzip,deflate"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/userinfo", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.AssignMessage.RemoveApimServiceHeader.timeTaken", "success": true, "value": "7606"}}]}]}, {"id": "FlowReturn", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "PreTargetFlowHook->PreTargetSharedFlow"}]}, "timestamp": "04-11-21 14:51:08:094"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "loadbalancing.targetserver", "value": "cis2-keycloak"}, {"name": "loadbalancing.isfallback", "value": "false"}, {"name": "loadbalancing.failedservers", "value": "[]"}]}, "timestamp": "04-11-21 14:51:08:094"}]}, {"id": "Paused", "results": []}, {"id": "Resumed", "results": []}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "targetendpoint_identity-server-userinfo.isFromClientPool", "value": "false"}, {"name": "targetendpoint_identity-server-userinfo.totalConnectionTimeMs", "value": "14"}, {"name": "targetendpoint_identity-server-userinfo.socketAgeMs", "value": "14"}, {"name": "targetendpoint_identity-server-userinfo.connectionTlsHandshakeTimeMs", "value": "9"}, {"name": "targetendpoint_identity-server-userinfo.socketUseCount", "value": "1"}, {"name": "targetendpoint_identity-server-userinfo.resolvedAddress", "value": "18.134.53.62"}, {"name": "targetendpoint_identity-server-userinfo.tlsHandshakeStatus", "value": "COMPLETED"}, {"name": "targetendpoint_identity-server-userinfo.connectionStatus", "value": "CONNECTED"}, {"name": "targetendpoint_identity-server-userinfo.isTlsEnabled", "value": "true"}, {"name": "targetendpoint_identity-server-userinfo.isHttpClientCached", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:117"}]}, {"id": "StateChange", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "To", "value": "REQ_SENT"}, {"name": "From", "value": "TARGET_REQ_FLOW"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Connection", "value": "keep-alive"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=31536000; includeSubDomains"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}]}, {"id": "Paused", "results": []}, {"id": "Resumed", "results": []}, {"id": "StateChange", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "To", "value": "RESP_START"}, {"name": "From", "value": "REQ_SENT"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Connection", "value": "keep-alive"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=31536000; includeSubDomains"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(\"identity-server-userinfo\" equals target.name)"}, {"name": "Tree", "value": "TARGET_identity-server-userinfo"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "target.name", "value": "identity-server-userinfo"}}]}]}, {"id": "Paused", "results": []}, {"id": "Resumed", "results": []}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "targetendpoint_identity-server-userinfo.isFromClientPool", "value": "false"}, {"name": "targetendpoint_identity-server-userinfo.totalConnectionTimeMs", "value": "14"}, {"name": "targetendpoint_identity-server-userinfo.socketAgeMs", "value": "22"}, {"name": "targetendpoint_identity-server-userinfo.connectionTlsHandshakeTimeMs", "value": "9"}, {"name": "targetendpoint_identity-server-userinfo.socketUseCount", "value": "1"}, {"name": "targetendpoint_identity-server-userinfo.resolvedAddress", "value": "18.134.53.62"}, {"name": "targetendpoint_identity-server-userinfo.tlsHandshakeStatus", "value": "COMPLETED"}, {"name": "targetendpoint_identity-server-userinfo.connectionStatus", "value": "CONNECTED"}, {"name": "targetendpoint_identity-server-userinfo.isTlsEnabled", "value": "true"}, {"name": "targetendpoint_identity-server-userinfo.isHttpClientCached", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:117"}]}, {"id": "StateChange", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "To", "value": "TARGET_RESP_FLOW"}, {"name": "From", "value": "RESP_START"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Connection", "value": "keep-alive"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=31536000; includeSubDomains"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(\"identity-server-userinfo\" equals target.name)"}, {"name": "Tree", "value": "TARGET_identity-server-userinfo"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "target.name", "value": "identity-server-userinfo"}}]}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "target.flow.name", "value": "PreFlow"}]}, "timestamp": "04-11-21 14:51:08:117"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "PreFlow"}]}, "timestamp": "04-11-21 14:51:08:117"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "target.flow.name", "value": "PostFlow"}]}, "timestamp": "04-11-21 14:51:08:117"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "PostFlow"}]}, "timestamp": "04-11-21 14:51:08:117"}]}, {"id": "StateChange", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "To", "value": "PROXY_RESP_FLOW"}, {"name": "From", "value": "TARGET_RESP_FLOW"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Connection", "value": "keep-alive"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=31536000; includeSubDomains"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(\"default\" equals proxy.name)"}, {"name": "Tree", "value": "PROXY_default"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.name", "value": "default"}}]}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "proxy.flow.name", "value": "PreFlow"}]}, "timestamp": "04-11-21 14:51:08:117"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "PreFlow"}]}, "timestamp": "04-11-21 14:51:08:117"}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /_ping and ((request.verb equals \"GET\") or (request.verb equals \"HEAD\")))"}, {"name": "Tree", "value": "AddPayloadToPing_RESPONSE_FLOW"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /authorize and (request.verb equals \"GET\"))"}, {"name": "Tree", "value": "Flow.GetAuthorization_RESPONSE_FLOW"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /token and ((request.verb equals \"POST\") and ((request.formparam.grant_type equals \"client_credentials\") and (request.formparam.subject_token_type not equals \"urn:ietf:params:oauth:token-type:id_token\"))))"}, {"name": "Tree", "value": "Flow.PostTokenClientCredentials_RESPONSE_FLOW"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /token and ((request.verb equals \"POST\") and ((request.formparam.subject_token_type equals \"urn:ietf:params:oauth:token-type:id_token\") and (apim.feature_toggles.enable-token-exchange equals true))))"}, {"name": "Tree", "value": "Flow.PostTokenTokenExchange_RESPONSE_FLOW"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /backchannel_logout and (request.verb equals \"POST\"))"}, {"name": "Tree", "value": "Flow.BackChannelLogout_RESPONSE_FLOW"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /token and ((request.verb equals \"POST\") and (request.formparam.grant_type equals \"authorization_code\")))"}, {"name": "Tree", "value": "Flow.PostTokenAuthorizationCode_RESPONSE_FLOW"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /token and ((request.verb equals \"POST\") and (request.formparam.grant_type equals \"refresh_token\")))"}, {"name": "Tree", "value": "Flow.PostRefreshToken_RESPONSE_FLOW"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /callback and (request.verb equals \"GET\"))"}, {"name": "Tree", "value": "Flow.GetCallback_RESPONSE_FLOW"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /userinfo and (request.verb equals \"GET\"))"}, {"name": "Tree", "value": "Flow.GetUserInfo_RESPONSE_FLOW"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}, {"Get": {"name": "request.verb", "value": "GET"}}]}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "proxy.flow.name", "value": "Flow.GetUserInfo"}, {"name": "proxy.flow.description", "value": ""}]}, "timestamp": "04-11-21 14:51:08:117"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "Flow.GetUserInfo"}, {"name": "current.flow.description", "value": ""}]}, "timestamp": "04-11-21 14:51:08:117"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "proxy.flow.name", "value": "PostFlow"}]}, "timestamp": "04-11-21 14:51:08:117"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "PostFlow"}]}, "timestamp": "04-11-21 14:51:08:117"}]}, {"id": "StateChange", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "To", "value": "RESP_SENT"}, {"name": "From", "value": "PROXY_RESP_FLOW"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Connection", "value": "keep-alive"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=31536000; includeSubDomains"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "type", "value": "FlowHookAction"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Connection", "value": "keep-alive"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=31536000; includeSubDomains"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}, {"ActionResult": "VariableAccess", "accessList": []}]}, {"id": "FlowCallout", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "PostProxyFlowHook->PostProxySharedFlow"}]}, "timestamp": "04-11-21 14:51:08:117"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "true"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.SetHSTSHeader"}, {"name": "stepDefinition-name", "value": "AssignMessage.SetHSTSHeader"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Connection", "value": "keep-alive"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "message.header.Strict-Transport-Security", "success": true, "value": "max-age=864000; includeSubDomains"}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.SetHSTSHeader.timeTaken", "success": true, "value": "17006"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "expression", "value": "original-request-details.header.X-Correlation-ID matches regular expression .+"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.Mirror.CorrelationID"}, {"name": "stepDefinition-name", "value": "AssignMessage.Mirror.CorrelationID"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Connection", "value": "keep-alive"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "message.header.Strict-Transport-Security", "success": true, "value": "max-age=864000; includeSubDomains"}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.SetHSTSHeader.timeTaken", "success": true, "value": "17006"}}, {"Get": {"name": "original-request-details.header.X-Correlation-ID"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "expression", "value": "((flag.custom-header-x-request-id not equals true) and original-request-details.header.X-Request-ID matches regular expression .+)"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.Mirror.RequestID"}, {"name": "stepDefinition-name", "value": "AssignMessage.Mirror.RequestID"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Connection", "value": "keep-alive"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "flag.custom-header-x-request-id"}}, {"Get": {"name": "original-request-details.header.X-Request-ID"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "flowcallout"}, {"name": "expression", "value": "((apigee.access_token not equals null) and (apigee.access_token not equals \"\"))"}, {"name": "type", "value": "FlowCalloutStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "true"}, {"name": "stepDefinition-displayName", "value": "FlowCallout.HashAccessToken"}, {"name": "stepDefinition-name", "value": "FlowCallout.HashAccessToken"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Connection", "value": "keep-alive"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.FlowCallout.HashAccessToken.timeTaken", "success": true, "value": "7005"}}]}]}, {"id": "FlowCallout", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "HashAccessToken"}]}, "timestamp": "04-11-21 14:51:08:117"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "HMAC"}, {"name": "type", "value": "HMACStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "HMAC.AccessToken"}, {"name": "stepDefinition-name", "value": "HMAC.AccessToken"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:117"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Connection", "value": "keep-alive"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "apigee.access_token", "value": "jWMyiKoedAP9d98QWGaZgOBU9LjH"}}, {"Set": {"name": "hmac.HMAC.AccessToken.message", "success": true, "value": "jWMyiKoedAP9d98QWGaZgOBU9LjH"}}, {"Set": {"name": "hmac.HMAC.AccessToken.keybytes", "success": true, "value": "4241364246423933353838413838453539434539434334464341443846"}}, {"Set": {"name": "hmac.HMAC.AccessToken.outputencoding", "success": true, "value": "BASE64"}}, {"Set": {"name": "auth.access_token_hash", "success": true, "value": "MOe5E3R7/Fmhd4InvucA9Y1jvROTIh0cMq5EXpc1/vV+Q3+GM4oY9iaSlO9kAqoSKbE1nd5JJ29+6QO4zVpFOQ=="}}, {"Set": {"name": "apigee.metrics.policy.HMAC.AccessToken.timeTaken", "success": true, "value": "61126"}}]}]}, {"id": "FlowReturn", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "HashAccessToken"}]}, "timestamp": "04-11-21 14:51:08:118"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "flowcallout"}, {"name": "type", "value": "FlowCalloutStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "FlowCallout.LogApiKeyProtectedEndpoints"}, {"name": "stepDefinition-name", "value": "FlowCallout.LogApiKeyProtectedEndpoints"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:118"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Connection", "value": "keep-alive"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.FlowCallout.LogApiKeyProtectedEndpoints.timeTaken", "success": true, "value": "3162"}}]}]}, {"id": "FlowCallout", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "LogApiKeyProtectedEndpoints"}]}, "timestamp": "04-11-21 14:51:08:118"}]}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "javascript-executionTime", "value": "0"}, {"name": "action", "value": "CONTINUE"}, {"name": "javascript-timeLimit", "value": "200"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "javascript"}, {"name": "javascript-name", "value": "SetLoggingFields.js"}, {"name": "stepExecution-stdout", "value": "accept\naccept-encoding\nauthorization\nhost\nnhsd-correlation-id\nnhsd-request-id\nuser-agent\nx-forwarded-for\nx-forwarded-port\nx-forwarded-proto"}, {"name": "type", "value": "JavascriptStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "JavaScript.SetLoggingFields"}, {"name": "stepDefinition-name", "value": "JavaScript.SetLoggingFields"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:118"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Connection", "value": "keep-alive"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "apigee.client_id", "value": "8z3lF1KOiIRvua1g5GXvpp5G76BUQazx"}}, {"Get": {"name": "message.status.code", "value": "200"}}, {"Get": {"name": "apigee.developer.app.name", "value": "apim-auto-c1f392ee-9e5c-4abf-b662-21e88546b8ac"}}, {"Get": {"name": "accesstoken.auth_grant_type", "value": "authorization_code"}}, {"Get": {"name": "request.headers.names", "value": "[Accept, Accept-Encoding, Authorization, Host, NHSD-Correlation-ID, NHSD-Request-ID, User-Agent, X-Forwarded-For, X-Forwarded-Port, X-Forwarded-Proto]"}}, {"Set": {"name": "apigee.metrics.policy.JavaScript.SetLoggingFields.timeTaken", "success": true, "value": "444215"}}]}]}, {"id": "Resumed", "results": []}, {"id": "FlowReturn", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "LogApiKeyProtectedEndpoints"}]}, "timestamp": "04-11-21 14:51:08:118"}]}, {"id": "FlowReturn", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "PostProxyFlowHook->PostProxySharedFlow"}]}, "timestamp": "04-11-21 14:51:08:118"}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(\"default\" equals proxy.name)"}, {"name": "Tree", "value": "PROXY_default"}]}, "timestamp": "04-11-21 14:51:08:118"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.edge.sharedflow.name", "success": true}}, {"Set": {"name": "apigee.edge.flowhook.name", "success": true}}, {"Get": {"name": "proxy.name", "value": "default"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(\"identity-server-userinfo\" equals target.name)"}, {"name": "Tree", "value": "TARGET_identity-server-userinfo"}]}, "timestamp": "04-11-21 14:51:08:118"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "target.name", "value": "identity-server-userinfo"}}]}]}, {"id": "StateChange", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "To", "value": "END"}, {"name": "From", "value": "RESP_SENT"}]}, "timestamp": "04-11-21 14:51:08:118"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Connection", "value": "keep-alive"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}]}, {"id": "DebugMask", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "SuccessFullyMaskedConfigs", "value": "[]"}]}, "timestamp": "04-11-21 14:51:08:119"}]}, {"id": "Resumed", "results": []}, {"id": "StateChange", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "To", "value": "PROXY_POST_RESP_SENT"}, {"name": "From", "value": "END"}]}, "timestamp": "04-11-21 14:51:08:119"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "X-Apigee.dp.color", "value": "mp-564-210308-0060114-latest-cf6a"}, {"name": "X-Apigee.Message-ID", "value": "rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "X-Apigee.nat", "value": "prod-geu2a-gnat001"}, {"name": "X-Apigee.proxy", "value": "/organizations/nhsd-nonprod/environments/internal-dev/apiproxies/identity-service-pr-251/revisions/14"}, {"name": "X-Apigee.proxy.basepath", "value": "oauth2-pr-251"}, {"name": "X-Apigee.region", "value": "europe-west2"}, {"name": "X-Apigee.target-latency", "value": "23"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(\"default\" equals proxy.name)"}, {"name": "Tree", "value": "PROXY_default"}]}, "timestamp": "04-11-21 14:51:08:119"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.name", "value": "default"}}]}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "proxy.flow.name", "value": "PostClientFlow"}]}, "timestamp": "04-11-21 14:51:08:119"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "PostClientFlow"}]}, "timestamp": "04-11-21 14:51:08:119"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "flowcallout"}, {"name": "type", "value": "StepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "FlowCallout.LogToSplunk"}, {"name": "stepDefinition-name", "value": "FlowCallout.LogToSplunk"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:119"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "X-Apigee.dp.color", "value": "mp-564-210308-0060114-latest-cf6a"}, {"name": "X-Apigee.Message-ID", "value": "rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "X-Apigee.nat", "value": "prod-geu2a-gnat001"}, {"name": "X-Apigee.proxy", "value": "/organizations/nhsd-nonprod/environments/internal-dev/apiproxies/identity-service-pr-251/revisions/14"}, {"name": "X-Apigee.proxy.basepath", "value": "oauth2-pr-251"}, {"name": "X-Apigee.region", "value": "europe-west2"}, {"name": "X-Apigee.target-latency", "value": "23"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.FlowCallout.LogToSplunk.timeTaken", "success": true, "value": "9105"}}]}]}, {"id": "FlowCallout", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "LogToSplunk"}]}, "timestamp": "04-11-21 14:51:08:119"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ServiceCallout.request", "value": "{\"messageID\":\"rrt-1078180899246236782-c-geu2-23779-897920-1\",\"client\":{\"ip\":\"3.11.106.35\",\"received_start\":\"1636037468083\",\"received_end\":\"1636037468083\",\"sent_start\":\"1636037468118\",\"sent_end\":\"1636037468119\",\"user_agent\":\"Python/3.9 aiohttp/3.7.4.post0\"},\"request\":{\"uri\":\"/oauth2-pr-251/userinfo\",\"verb\":\"GET\",\"content_type\":\"\",\"content_length\":\"0\",\"content_encoding\":\"\",\"requestID\":\"\",\"correlationID\":\"\",\"host\":\"internal-dev.api.service.nhs.uk\",\"port\":\"443\",\"uri_path\":\"/oauth2-pr-251/userinfo\",\"....."}]}, "timestamp": "04-11-21 14:51:08:119"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "servicecallout"}, {"name": "type", "value": "StepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "ServiceCallout.LogToSplunk"}, {"name": "stepDefinition-name", "value": "ServiceCallout.LogToSplunk"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:08:119"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "X-Apigee.dp.color", "value": "mp-564-210308-0060114-latest-cf6a"}, {"name": "X-Apigee.Message-ID", "value": "rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "X-Apigee.nat", "value": "prod-geu2a-gnat001"}, {"name": "X-Apigee.proxy", "value": "/organizations/nhsd-nonprod/environments/internal-dev/apiproxies/identity-service-pr-251/revisions/14"}, {"name": "X-Apigee.proxy.basepath", "value": "oauth2-pr-251"}, {"name": "X-Apigee.region", "value": "europe-west2"}, {"name": "X-Apigee.target-latency", "value": "23"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "splunkCalloutRequest"}}, {"Set": {"name": "splunkCalloutRequest.header.Authorization", "success": true, "value": "Splunk 212c99be-0bfb-41cd-b19b-fc50385f2f35"}}, {"Set": {"name": "splunkCalloutRequest.verb", "success": true, "value": "POST"}}, {"Set": {"name": "splunkCalloutRequest.queryparam.index", "success": true, "value": "requests_apm_ptl"}}, {"Get": {"name": "virtualhost.name", "value": "secure"}}, {"Set": {"name": "splunkCalloutRequest.queryparam.host", "success": true, "value": "apigee:secure"}}, {"Get": {"name": "client.received.start.timestamp", "value": "1636037468083"}}, {"Set": {"name": "splunkCalloutRequest.queryparam.time", "success": true, "value": "1636037468083"}}, {"Set": {"name": "splunkCalloutRequest.queryparam.sourcetype", "success": true, "value": "apm-apigee-json"}}, {"Get": {"name": "organization.name", "value": "nhsd-nonprod"}}, {"Get": {"name": "environment.name", "value": "internal-dev"}}, {"Get": {"name": "apiproxy.name", "value": "identity-service-pr-251"}}, {"Get": {"name": "apiproxy.revision", "value": "14"}}, {"Set": {"name": "splunkCalloutRequest.queryparam.source", "success": true, "value": "apigee:nhsd-nonprod:internal-dev:identity-service-pr-251:14"}}, {"Get": {"name": "messageid", "value": "rrt-1078180899246236782-c-geu2-23779-897920-1"}}, {"Get": {"name": "client.ip", "value": "3.11.106.35"}}, {"Get": {"name": "client.received.start.timestamp", "value": "1636037468083"}}, {"Get": {"name": "client.received.end.timestamp", "value": "1636037468083"}}, {"Get": {"name": "client.sent.start.timestamp", "value": "1636037468118"}}, {"Get": {"name": "client.sent.end.timestamp", "value": "1636037468119"}}, {"Get": {"name": "request-data-for-splunk.header.User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}}, {"Get": {"name": "request-data-for-splunk.uri", "value": "/oauth2-pr-251/userinfo"}}, {"Get": {"name": "request-data-for-splunk.verb", "value": "GET"}}, {"Get": {"name": "request-data-for-splunk.header.Content-Type", "value": ""}}, {"Get": {"name": "client.received.content.length", "value": "0"}}, {"Get": {"name": "request-data-for-splunk.header.Content-Encoding"}}, {"Get": {"name": "request-data-for-splunk.header.X-Request-ID"}}, {"Get": {"name": "request-data-for-splunk.header.X-Correlation-ID"}}, {"Get": {"name": "request-data-for-splunk.header.Host", "value": "internal-dev.api.service.nhs.uk"}}, {"Get": {"name": "request-data-for-splunk.header.X-Forwarded-Port", "value": "443"}}, {"Get": {"name": "request-data-for-splunk.path", "value": "/oauth2-pr-251/userinfo"}}, {"Get": {"name": "request-data-for-splunk.querystring", "value": ""}}, {"Get": {"name": "organization.name", "value": "nhsd-nonprod"}}, {"Get": {"name": "apim.api_guid", "value": "d5a3f4fc-e61f-41f3-ab72-16aa5ef3ff2b"}}, {"Get": {"name": "apim.api_spec_guid", "value": ""}}, {"Get": {"name": "apigee.apiproduct.name", "value": "apim-auto-d8fcd097-70a2-4855-a5ed-38d32918e42b"}}, {"Get": {"name": "apigee.developer.app.name", "value": "apim-auto-c1f392ee-9e5c-4abf-b662-21e88546b8ac"}}, {"Get": {"name": "environment.name", "value": "internal-dev"}}, {"Get": {"name": "apigee.client_id", "value": "8z3lF1KOiIRvua1g5GXvpp5G76BUQazx"}}, {"Get": {"name": "developer.app.id", "value": "d93681cd-e785-4180-9282-7621420b2fac"}}, {"Get": {"name": "app.asid"}}, {"Get": {"name": "apiproxy.name", "value": "identity-service-pr-251"}}, {"Get": {"name": "apiproxy.revision", "value": "14"}}, {"Get": {"name": "proxy.basepath", "value": "oauth2-pr-251"}}, {"Get": {"name": "proxy.pathsuffix", "value": "/userinfo"}}, {"Get": {"name": "auth.access_token_hash", "value": "MOe5E3R7/Fmhd4InvucA9Y1jvROTIh0cMq5EXpc1/vV+Q3+GM4oY9iaSlO9kAqoSKbE1nd5JJ29+6QO4zVpFOQ=="}}, {"Get": {"name": "accesstoken.auth_user_id", "value": "423dff67-e085-4b04-847f-490156bc7693"}}, {"Get": {"name": "accesstoken.auth_type", "value": "user"}}, {"Get": {"name": "accesstoken.auth_grant_type", "value": "authorization_code"}}, {"Get": {"name": "accesstoken.auth_level", "value": "aal3"}}, {"Get": {"name": "accesstoken.auth_provider", "value": "nhs-cis2"}}, {"Get": {"name": "accesstoken.id_token-acr", "value": "AAL3_ANY"}}, {"Get": {"name": "grant_type", "value": "authorization_code"}}, {"Get": {"name": "status", "value": "approved"}}, {"Get": {"name": "accesstoken.id_token-subject", "value": "423dff67-e085-4b04-847f-490156bc7693"}}, {"Get": {"name": "accesstoken.id_token-issuer", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock"}}, {"Get": {"name": "scope", "value": "urn:nhsd:apim:user-nhs-id:aal3:personal-demographics-service"}}, {"Get": {"name": "target.host", "value": "identity.ptl.api.platform.nhs.uk"}}, {"Get": {"name": "target.response.status.code", "value": "200"}}, {"Get": {"name": "target.received.content.length", "value": "46"}}, {"Get": {"name": "target.received.start.timestamp", "value": "1636037468116"}}, {"Get": {"name": "target.received.end.timestamp", "value": "1636037468117"}}, {"Get": {"name": "target.sent.start.timestamp", "value": "1636037468094"}}, {"Get": {"name": "target.sent.end.timestamp", "value": "1636037468109"}}, {"Get": {"name": "target.port", "value": "443"}}, {"Get": {"name": "is.error", "value": "false"}}, {"Get": {"name": "apigee.edge.execution.is_policy_error", "value": "0"}}, {"Get": {"name": "apigee.edge.execution.is_target_error", "value": "0"}}, {"Get": {"name": "apigee.edge.execution.fault_policy_name"}}, {"Get": {"name": "apigee.edge.execution.fault_flow_name"}}, {"Get": {"name": "error"}}, {"Get": {"name": "error.content"}}, {"Get": {"name": "error.message"}}, {"Get": {"name": "error.status.code"}}, {"Get": {"name": "error.reason.phrase"}}, {"Get": {"name": "error.transport.message"}}, {"Get": {"name": "error.state"}}, {"Get": {"name": "response.status.code", "value": "200"}}, {"Get": {"name": "response.header.Content-Type", "value": "application/json"}}, {"Get": {"name": "response.header.Content-Length", "value": "46"}}, {"Get": {"name": "response.header.Content-Encoding"}}, {"Get": {"name": "status.response"}}, {"Set": {"name": "splunkCalloutRequest.content", "success": true, "value": "{\"messageID\":\"rrt-1078180899246236782-c-geu2-23779-897920-1\",\"client\":{\"ip\":\"3.11.106.35\",\"received_start\":\"1636037468083\",\"received_end\":\"1636037468083\",\"sent_start\":\"1636037468118\",\"sent_end\":\"1636037468119\",\"user_agent\":\"Python/3.9 aiohttp/3.7.4.post0\"},\"request\":{\"uri\":\"/oauth2-pr-251/userinfo\",\"verb\":\"GET\",\"content_type\":\"\",\"content_length\":\"0\",\"content_encoding\":\"\",\"requestID\":\"\",\"correlationID\":\"\",\"host\":\"internal-dev.api.service.nhs.uk\",\"port\":\"443\",\"uri_path\":\"/oauth2-pr-251/userinfo\",\"uri_params\":\"\"},\"meta\":{\"organization\":\"nhsd-nonprod\",\"api_guid\":\"d5a3f4fc-e61f-41f3-ab72-16aa5ef3ff2b\",\"api_spec_guid\":\"\",\"product\":\"apim-auto-d8fcd097-70a2-4855-a5ed-38d32918e42b\",\"application\":\"apim-auto-c1f392ee-9e5c-4abf-b662-21e88546b8ac\",\"env\":\"internal-dev\",\"client_id\":\"8z3lF1KOiIRvua1g5GXvpp5G76BUQazx\",\"application_id\":\"d93681cd-e785-4180-9282-7621420b2fac\",\"ASID\":\"\"},\"proxy\":{\"name\":\"identity-service-pr-251\",\"revision\":\"14\",\"basepath\":\"oauth2-pr-251\",\"suffix\":\"/userinfo\"},\"auth\":{\"access_token_hash\":\"MOe5E3R7/Fmhd4InvucA9Y1jvROTIh0cMq5EXpc1/vV+Q3+GM4oY9iaSlO9kAqoSKbE1nd5JJ29+6QO4zVpFOQ==\",\"user\":{\"user_id\":\"423dff67-e085-4b04-847f-490156bc7693\"},\"meta\":{\"auth_type\":\"user\",\"grant_type\":\"authorization_code\",\"level\":\"aal3\",\"provider\":\"nhs-cis2\"},\"id_token_acr\":\"AAL3_ANY\",\"grant_type\":\"authorization_code\",\"authorization\":\"approved\",\"id_token_subject\":\"423dff67-e085-4b04-847f-490156bc7693\",\"id_token_issuer\":\"https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock\",\"scope\":\"urn:nhsd:apim:user-nhs-id:aal3:personal-demographics-service\"},\"target\":{\"host\":\"identity.ptl.api.platform.nhs.uk\",\"status_code\":\"200\",\"content_length\":\"46\",\"received_start\":\"1636037468116\",\"received_end\":\"1636037468117\",\"sent_start\":\"1636037468094\",\"sent_end\":\"1636037468109\",\"port\":\"443\"},\"error\":{\"is_error\":\"false\",\"is_policy_error\":\"0\",\"is_target_error\":\"0\",\"policy_error_policy_name\":\"\",\"policy_error_flow_name\":\"\",\"error\":\"\",\"content\":\"\",\"message\":\"\",\"status_code\":\"\",\"reason_phrase\":\"\",\"transport_message\":\"\",\"state\":\"\"},\"response\":{\"status_code\":\"200\",\"content_type\":\"application/json\",\"content_length\":\"46\",\"content_encoding\":\"\",\"content_body\":\"\"}}"}}, {"Set": {"name": "splunkCalloutRequest.header.Content-Type", "success": true, "value": "application/json"}}, {"Get": {"name": "splunkCalloutRequest"}}, {"Set": {"name": "servicecallout.requesturi", "success": true, "value": "/services/collector/raw?index=requests_apm_ptl&host=apigee%3Asecure&time=1636037468083&sourcetype=apm-apigee-json&source=apigee%3Anhsd-nonprod%3Ainternal-dev%3Aidentity-service-pr-251%3A14"}}, {"Set": {"name": "apigee.metrics.policy.ServiceCallout.LogToSplunk.timeTaken", "success": true, "value": "360710"}}]}]}, {"id": "FlowReturn", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "LogToSplunk"}]}, "timestamp": "04-11-21 14:51:08:119"}]}, {"id": "Paused", "results": []}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "loadbalancing.targetserver", "value": "splunk-cloud-hec"}, {"name": "loadbalancing.isfallback", "value": "false"}, {"name": "loadbalancing.failedservers", "value": "[]"}]}, "timestamp": "04-11-21 14:51:08:120"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "expressionResult", "value": "true"}, {"name": "type", "value": "AnalyticsPredefinedVariablesPublisher"}, {"name": "expression", "value": "(analytics equals null )"}]}, "timestamp": "04-11-21 14:51:08:120"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "X-Apigee.dp.color", "value": "mp-564-210308-0060114-latest-cf6a"}, {"name": "X-Apigee.Message-ID", "value": "rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "X-Apigee.nat", "value": "prod-geu2a-gnat001"}, {"name": "X-Apigee.proxy", "value": "/organizations/nhsd-nonprod/environments/internal-dev/apiproxies/identity-service-pr-251/revisions/14"}, {"name": "X-Apigee.proxy.basepath", "value": "oauth2-pr-251"}, {"name": "X-Apigee.region", "value": "europe-west2"}, {"name": "X-Apigee.target-latency", "value": "23"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}, {"ActionResult": "VariableAccess", "accessList": []}]}, {"id": "Resumed", "results": []}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "servicecallout_ServiceCallout.LogToSplunk.totalConnectionTimeMs", "value": "0"}, {"name": "servicecallout_ServiceCallout.LogToSplunk.isTlsEnabled", "value": "true"}, {"name": "servicecallout_ServiceCallout.LogToSplunk.isFromClientPool", "value": "true"}, {"name": "servicecallout_ServiceCallout.LogToSplunk.socketUseCount", "value": "551"}, {"name": "servicecallout_ServiceCallout.LogToSplunk.socketAgeMs", "value": "2852870"}, {"name": "servicecallout_ServiceCallout.LogToSplunk.resolvedAddress", "value": "3.11.152.88"}, {"name": "servicecallout_ServiceCallout.LogToSplunk.isHttpClientCached", "value": "true"}, {"name": "servicecallout_ServiceCallout.LogToSplunk.connectionTlsHandshakeTimeMs", "value": "0"}, {"name": "servicecallout_ServiceCallout.LogToSplunk.connectionStatus", "value": "CONNECTED"}]}, "timestamp": "04-11-21 14:51:08:120"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "expressionResult", "value": "false"}, {"name": "type", "value": "AnalyticsPublisher"}, {"name": "expression", "value": "(analytics not null)"}]}, "timestamp": "04-11-21 14:51:08:120"}, {"ActionResult": "ResponseMessage", "content": "{\"sub\":\"423dff67-e085-4b04-847f-490156bc7693\"}", "headers": [{"name": "Cache-Control", "value": "no-cache"}, {"name": "Content-Length", "value": "46"}, {"name": "Content-Type", "value": "application/json"}, {"name": "Date", "value": "Thu, 04 Nov 2021 14:51:08 GMT"}, {"name": "Referrer-Policy", "value": "no-referrer"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "X-Apigee.dp.color", "value": "mp-564-210308-0060114-latest-cf6a"}, {"name": "X-Apigee.Message-ID", "value": "rrt-1078180899246236782-c-geu2-23779-897920-1"}, {"name": "X-Apigee.nat", "value": "prod-geu2a-gnat001"}, {"name": "X-Apigee.proxy", "value": "/organizations/nhsd-nonprod/environments/internal-dev/apiproxies/identity-service-pr-251/revisions/14"}, {"name": "X-Apigee.proxy.basepath", "value": "oauth2-pr-251"}, {"name": "X-Apigee.region", "value": "europe-west2"}, {"name": "X-Apigee.target-latency", "value": "23"}, {"name": "X-Content-Type-Options", "value": "nosniff"}, {"name": "X-Frame-Options", "value": "SAMEORIGIN"}, {"name": "X-XSS-Protection", "value": "1; mode=block"}], "reasonPhrase": "OK", "statusCode": "200"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "envoy.proxy"}}, {"Get": {"name": "servicecallout.ServiceCallout.LogToSplunk.target.url"}}, {"Get": {"name": "target.name", "value": "identity-server-userinfo"}}, {"Get": {"name": "dynamic.target"}}, {"Get": {"name": "target.basepath", "value": "{identity-service-config.cis2.userinfo_path}"}}, {"Get": {"name": "dynamic.target"}}, {"Get": {"name": "target.url"}}, {"Get": {"name": "target.host", "value": "identity.ptl.api.platform.nhs.uk"}}, {"Get": {"name": "target.ip", "value": "18.134.53.62"}}, {"Get": {"name": "envoy.proxy"}}, {"Get": {"name": "client.ip", "value": "3.11.106.35"}}, {"Get": {"name": "envoy.proxy"}}, {"Get": {"name": "is.error", "value": "false"}}, {"Get": {"name": "target.sent.start.timestamp", "value": "1636037468094"}}, {"Get": {"name": "target.sent.end.timestamp", "value": "1636037468109"}}, {"Get": {"name": "target.received.start.timestamp", "value": "1636037468116"}}, {"Get": {"name": "target.received.end.timestamp", "value": "1636037468117"}}, {"Get": {"name": "client.received.start.timestamp", "value": "1636037468083"}}, {"Get": {"name": "client.received.end.timestamp", "value": "1636037468083"}}, {"Get": {"name": "client.sent.start.timestamp", "value": "1636037468118"}}, {"Get": {"name": "servicecallout.ServiceCallout.LogToSplunk.expectedcn"}}, {"Get": {"name": "dynamic.target"}}, {"Get": {"name": "client.sent.end.timestamp", "value": "1636037468119"}}, {"Get": {"name": "message.status.code", "value": "200"}}, {"Get": {"name": "request.uri", "value": "/auth/realms/cis2-mock/protocol/openid-connect/userinfo"}}, {"Get": {"name": "request.path", "value": "/auth/realms/cis2-mock/protocol/openid-connect/userinfo"}}, {"Get": {"name": "request.verb", "value": "GET"}}, {"Get": {"name": "flow.resource.name"}}, {"Get": {"name": "sla"}}, {"Get": {"name": "client.received.content.length", "value": "0"}}, {"Get": {"name": "target.received.content.length", "value": "46"}}, {"Get": {"name": "target.response.status.code", "value": "200"}}, {"Get": {"name": "request.header.User-Agent", "value": "Python/3.9 aiohttp/3.7.4.post0"}}, {"Get": {"name": "request.header.X-Apigee-Client-Device-Id"}}, {"Get": {"name": "request.header.X-Apigee-Client-Session-Id"}}, {"Get": {"name": "request.header.X-Apigee-Client-Org-Name"}}, {"Get": {"name": "request.header.X-Apigee-Client-App-Name"}}, {"Get": {"name": "request.header.X-Apigee-Client-Request-Id"}}, {"Get": {"name": "request.header.X-Forwarded-Proto", "value": "https"}}, {"Get": {"name": "request.header.True-client-ip"}}, {"Get": {"name": "analytics"}}]}]}, {"id": "Paused", "results": []}, {"id": "Resumed", "results": []}, {"id": "Paused", "results": []}]}