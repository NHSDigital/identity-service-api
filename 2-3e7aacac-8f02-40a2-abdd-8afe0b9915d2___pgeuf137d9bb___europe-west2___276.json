{"completed": true, "point": [{"id": "Paused", "results": []}, {"id": "Resumed", "results": []}, {"id": "StateChange", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "To", "value": "REQ_HEADERS_PARSED"}, {"name": "From", "value": "REQ_START"}]}, "timestamp": "04-11-21 14:51:05:537"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Apigee.client.connection", "value": "3.11.106.35:57234;35.234.138.138:443;ssl"}, {"name": "X-Apigee.Host", "value": "internal-dev.api.service.nhs.uk:443"}, {"name": "X-Apigee.Message-ID", "value": "rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "X-Apigee.Message-Timeout", "value": "57"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "environment.name", "value": "internal-dev"}, {"name": "environment.qualifiedname", "value": "nhsd-nonprod__internal-dev"}, {"name": "environment.orgname", "value": "nhsd-nonprod"}]}, "timestamp": "04-11-21 14:51:05:537"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "organization.name", "value": "nhsd-nonprod"}]}, "timestamp": "04-11-21 14:51:05:537"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "apiproxy.qualifiedname", "value": "identity-service-pr-251__14"}, {"name": "apiproxy.basepath", "value": "/"}, {"name": "apiproxy.revision", "value": "14"}, {"name": "apiproxy.name", "value": "identity-service-pr-251"}]}, "timestamp": "04-11-21 14:51:05:537"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "proxy.basepath", "value": "oauth2-pr-251"}, {"name": "proxy.pathsuffix", "value": "/authorize"}, {"name": "proxy.url", "value": "https://internal-dev.api.service.nhs.uk/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e"}, {"name": "proxy.name", "value": "default"}, {"name": "proxy.client.ip", "value": "3.11.106.35"}]}, "timestamp": "04-11-21 14:51:05:537"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "virtualhost.aliases.values", "value": "[\"nhsd-nonprod-internal-dev.apigee.net\",\"internal-dev.api.service.nhs.uk\"]"}, {"name": "virtualhost.port", "value": "443"}, {"name": "virtualhost.name", "value": "secure"}, {"name": "virtualhost.ssl.enabled", "value": "true"}, {"name": "virtualhost.aliases", "value": "{nhsd-nonprod-internal-dev.apigee.net,internal-dev.api.service.nhs.uk}"}, {"name": "virtualhost.ip", "value": "35.234.138.138"}]}, "timestamp": "04-11-21 14:51:05:537"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": []}, "timestamp": "04-11-21 14:51:05:537"}]}, {"id": "StateChange", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "To", "value": "PROXY_REQ_FLOW"}, {"name": "From", "value": "REQ_HEADERS_PARSED"}]}, "timestamp": "04-11-21 14:51:05:537"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "type", "value": "FlowHookAction"}]}, "timestamp": "04-11-21 14:51:05:537"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": []}]}, {"id": "FlowCallout", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "PreProxyFlowHook->PreProxySharedFlow"}]}, "timestamp": "04-11-21 14:51:05:537"}]}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "keyvaluemapoperations"}, {"name": "type", "value": "KeyValueMapOperationsExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "KeyValueMapOperations.GetCommonSecrets"}, {"name": "stepDefinition-name", "value": "KeyValueMapOperations.GetCommonSecrets"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:537"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "current.flow"}}, {"Set": {"name": "apigee.metrics.policy.KeyValueMapOperations.GetCommonSecrets.timeTaken", "success": true, "value": "45099"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "keyvaluemapoperations"}, {"name": "type", "value": "KeyValueMapOperationsExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "KeyValueMapOperations.GetConfigClear"}, {"name": "stepDefinition-name", "value": "KeyValueMapOperations.GetConfigClear"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:538"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "current.flow"}}, {"Set": {"name": "apim.feature_toggles_raw", "success": true, "value": "{\"enable-token-exchange\": true, \"enable-nhs-login-combined-auth\": true, \"enable-citizen-access\": true}"}}, {"Set": {"name": "apigee.metrics.policy.KeyValueMapOperations.GetConfigClear.timeTaken", "success": true, "value": "19664"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "keyvaluemapoperations"}, {"name": "type", "value": "KeyValueMapOperationsExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "KeyValueMapOperations.GetConfigEncrypted"}, {"name": "stepDefinition-name", "value": "KeyValueMapOperations.GetConfigEncrypted"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:538"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "current.flow"}}, {"Set": {"name": "apigee.metrics.policy.KeyValueMapOperations.GetConfigEncrypted.timeTaken", "success": true, "value": "16659"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "javascript-executionTime", "value": "0"}, {"name": "action", "value": "CONTINUE"}, {"name": "javascript-timeLimit", "value": "200"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "javascript"}, {"name": "javascript-name", "value": "UnpackVars.js"}, {"name": "type", "value": "JavascriptStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "Javascript.UnpackVars"}, {"name": "stepDefinition-name", "value": "Javascript.UnpackVars"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:538"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "current.flow"}}, {"Get": {"name": "apim.vars_raw"}}, {"Get": {"name": "apim.feature_toggles_raw", "value": "{\"enable-token-exchange\": true, \"enable-nhs-login-combined-auth\": true, \"enable-citizen-access\": true}"}}, {"Set": {"name": "apim.feature_toggles.enable-token-exchange", "success": true, "value": "true"}}, {"Set": {"name": "apim.feature_toggles.enable-nhs-login-combined-auth", "success": true, "value": "true"}}, {"Set": {"name": "apim.feature_toggles.enable-citizen-access", "success": true, "value": "true"}}, {"Set": {"name": "apigee.metrics.policy.Javascript.UnpackVars.timeTaken", "success": true, "value": "243930"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.Copy.RequestDataForSplunk"}, {"name": "stepDefinition-name", "value": "AssignMessage.Copy.RequestDataForSplunk"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:538"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "current.flow"}}, {"Get": {"name": "request.uri", "value": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e"}}, {"Set": {"name": "request-data-for-splunk.uri", "success": true, "value": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e"}}, {"Get": {"name": "request.url"}}, {"Set": {"name": "request-data-for-splunk.url", "success": true, "value": ""}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.Copy.RequestDataForSplunk.timeTaken", "success": true, "value": "72911"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.Copy.RequestHeaders"}, {"name": "stepDefinition-name", "value": "AssignMessage.Copy.RequestHeaders"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:539"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "current.flow"}}, {"Get": {"name": "original-request-details"}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.Copy.RequestHeaders.timeTaken", "success": true, "value": "6289"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.Set.NHSDCorrelationIDHeader"}, {"name": "stepDefinition-name", "value": "AssignMessage.Set.NHSDCorrelationIDHeader"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:539"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "current.flow"}}, {"Get": {"name": "message.header.X-Request-ID"}}, {"Get": {"name": "message.header.X-Correlation-ID"}}, {"Get": {"name": "messageid", "value": "rrt-3450588342405387872-a-geu2-16400-4719011-1"}}, {"Set": {"name": "message.header.NHSD-Correlation-ID", "success": true, "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.Set.NHSDCorrelationIDHeader.timeTaken", "success": true, "value": "12358"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.Set.NHSDRequestIDHeader"}, {"name": "stepDefinition-name", "value": "AssignMessage.Set.NHSDRequestIDHeader"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:539"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "current.flow"}}, {"Get": {"name": "message.header.X-Request-ID"}}, {"Set": {"name": "message.header.NHSD-Request-ID", "success": true, "value": ""}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.Set.NHSDRequestIDHeader.timeTaken", "success": true, "value": "4436"}}]}]}, {"id": "FlowReturn", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "PreProxyFlowHook->PreProxySharedFlow"}]}, "timestamp": "04-11-21 14:51:05:539"}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(\"default\" equals proxy.name)"}, {"name": "Tree", "value": "PROXY_default"}]}, "timestamp": "04-11-21 14:51:05:539"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.edge.sharedflow.name", "success": true}}, {"Set": {"name": "apigee.edge.flowhook.name", "success": true}}, {"Get": {"name": "proxy.name", "value": "default"}}]}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "proxy.flow.name", "value": "PreFlow"}]}, "timestamp": "04-11-21 14:51:05:539"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "PreFlow"}]}, "timestamp": "04-11-21 14:51:05:539"}]}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "keyvaluemapoperations"}, {"name": "type", "value": "KeyValueMapOperationsExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "KeyValueMapOperations.GetIdentityServiceConfig"}, {"name": "stepDefinition-name", "value": "KeyValueMapOperations.GetIdentityServiceConfig"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:544"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.KeyValueMapOperations.GetIdentityServiceConfig.timeTaken", "success": true, "value": "5031449"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "javascript-executionTime", "value": "0"}, {"name": "action", "value": "CONTINUE"}, {"name": "javascript-timeLimit", "value": "200"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "javascript"}, {"name": "javascript-name", "value": "UnpackVars.js"}, {"name": "type", "value": "JavascriptStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "Javascript.UnpackVars"}, {"name": "stepDefinition-name", "value": "Javascript.UnpackVars"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:544"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "identity-service-config.cis2.access_token_expiry_ms", "success": true, "value": "600000"}}, {"Set": {"name": "identity-service-config.cis2.client_id", "success": true, "value": "test-client-1"}}, {"Set": {"name": "identity-service-config.cis2.refresh_token_expiry_ms", "success": true, "value": "3600000"}}, {"Set": {"name": "identity-service-config.cis2.refresh_tokens_validity_ms", "success": true, "value": "3600000"}}, {"Set": {"name": "identity-service-config.cis2.simulated_idp", "success": true, "value": "false"}}, {"Set": {"name": "identity-service-config.cis2.issuer", "success": true, "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock"}}, {"Set": {"name": "identity-service-config.cis2.access_token_path", "success": true, "value": "/auth/realms/cis2-mock/protocol/openid-connect/token"}}, {"Set": {"name": "identity-service-config.cis2.jwks_path", "success": true, "value": "/auth/realms/cis2-mock/protocol/openid-connect/certs"}}, {"Set": {"name": "identity-service-config.cis2.redirect_uri", "success": true, "value": "https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback"}}, {"Set": {"name": "identity-service-config.cis2.authorize_endpoint", "success": true, "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth"}}, {"Set": {"name": "identity-service-config.cis2.userinfo_path", "success": true, "value": "/auth/realms/cis2-mock/protocol/openid-connect"}}, {"Set": {"name": "identity-service-config.cis2.backchannel_allowed_ips", "success": true, "value": "[{\"address\": \"0.0.0.0\", \"mask\": \"1\"}, {\"address\": \"128.0.0.0\", \"mask\": \"1\"}]"}}, {"Set": {"name": "identity-service-config.nhs_login.jwks_path", "success": true, "value": "/mock-nhsid-jwks/identity-service/nhs-login-jwks"}}, {"Set": {"name": "identity-service-config.nhs_login.client_id", "success": true, "value": "some-client-id"}}, {"Set": {"name": "identity-service-config.nhs_login.issuer", "success": true, "value": "https://internal-dev.api.service.nhs.uk"}}, {"Set": {"name": "identity-service-config.nhs_login.audience", "success": true, "value": "https://internal-dev.api.service.nhs.uk/mock-nhsid-jwks/nhs_login_simulated_token"}}, {"Set": {"name": "identity-service-config.nhs_login.authorize_endpoint", "success": true, "value": "https://internal-dev.api.service.nhs.uk/mock-nhsid-jwks/nhs_login_simulated_auth"}}, {"Set": {"name": "identity-service-config.nhs_login.access_token_path", "success": true, "value": "/mock-nhsid-jwks/nhs_login_simulated_token"}}, {"Set": {"name": "identity-service-config.nhs_login.kid", "success": true, "value": "test-1"}}, {"Set": {"name": "identity-service-config.nhs_login.redirect_uri", "success": true, "value": "https://internal-dev.api.service.nhs.uk/oauth2/callback"}}, {"Set": {"name": "apigee.metrics.policy.Javascript.UnpackVars.timeTaken", "success": true, "value": "292159"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.setIDPvar"}, {"name": "stepDefinition-name", "value": "AssignMessage.setIDPvar"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:545"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "idp", "success": true, "value": "null"}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.setIDPvar.timeTaken", "success": true, "value": "10854"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "expression", "value": "(apim.feature_toggles.enable-nhs-login-combined-auth equals true)"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "true"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.ExtractExternalScope"}, {"name": "stepDefinition-name", "value": "AssignMessage.ExtractExternalScope"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:545"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "request.queryparam.scope"}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.ExtractExternalScope.timeTaken", "success": true, "value": "5794"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.RemoveExternalScope"}, {"name": "stepDefinition-name", "value": "AssignMessage.RemoveExternalScope"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:545"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.AssignMessage.RemoveExternalScope.timeTaken", "success": true, "value": "4325"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "Set APIM Guids"}, {"name": "stepDefinition-name", "value": "AssignMessage.SetApimGuids"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:545"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apim.api_guid", "success": true, "value": "d5a3f4fc-e61f-41f3-ab72-16aa5ef3ff2b"}}, {"Set": {"name": "apim.api_spec_guid", "success": true, "value": ""}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.SetApimGuids.timeTaken", "success": true, "value": "3712"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /_ping and ((request.verb equals \"GET\") or (request.verb equals \"HEAD\")))"}, {"name": "Tree", "value": "AddPayloadToPing_REQUEST_FLOW"}]}, "timestamp": "04-11-21 14:51:05:545"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/authorize"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /authorize and (request.verb equals \"GET\"))"}, {"name": "Tree", "value": "Flow.GetAuthorization_REQUEST_FLOW"}]}, "timestamp": "04-11-21 14:51:05:545"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/authorize"}}, {"Get": {"name": "request.verb", "value": "GET"}}]}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "proxy.flow.name", "value": "Flow.GetAuthorization"}, {"name": "proxy.flow.description", "value": "OAuth Authorization Endpoint"}]}, "timestamp": "04-11-21 14:51:05:545"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "Flow.GetAuthorization"}, {"name": "current.flow.description", "value": "OAuth Authorization Endpoint"}]}, "timestamp": "04-11-21 14:51:05:545"}]}, {"id": "Paused", "results": []}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "oauthV2.VerifyAPIKey.ClientId.fault.name", "value": ""}, {"name": "oauthV2.VerifyAPIKey.ClientId.fault.cause", "value": ""}, {"name": "oauthV2.VerifyAPIKey.ClientId.failed", "value": "false"}]}, "timestamp": "04-11-21 14:51:05:559"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "Identifier", "value": "verifyapikey.VerifyAPIKey.ClientId.app"}]}, "timestamp": "04-11-21 14:51:05:559"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "Identifier", "value": "verifyapikey.VerifyAPIKey.ClientId.developer"}]}, "timestamp": "04-11-21 14:51:05:559"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "oauthV2"}, {"name": "type", "value": "VerifyApiKeyStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "VerifyAPIKey.ClientId"}, {"name": "stepDefinition-name", "value": "VerifyAPIKey.ClientId"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:559"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "oauthV2.VerifyAPIKey.ClientId"}}, {"Get": {"name": "flow.resource.name"}}, {"Get": {"name": "request.queryparam.client_id", "value": "8z3lF1KOiIRvua1g5GXvpp5G76BUQazx"}}, {"Get": {"name": "environment.name", "value": "internal-dev"}}, {"Get": {"name": "apiproxy.name", "value": "identity-service-pr-251"}}, {"Get": {"name": "proxy.pathsuffix", "value": "/authorize"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.jwks-resource-url", "success": true, "value": "https://raw.githubusercontent.com/NHSDigital/identity-service-jwks/main/jwks/internal-dev/9baed6f4-1361-4a8e-8531-1f8426e3aba8.json"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.apiproduct.developer.quota.limit", "success": true, "value": "60000"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.redirection_uris", "success": true, "value": "https://httpbin.org/anything"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.apiproduct.ratelimit", "success": true, "value": "1000ps"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.apiproduct.developer.quota.interval", "success": true, "value": "1"}}, {"Set": {"name": "apiproduct.name", "success": true, "value": "apim-auto-d8fcd097-70a2-4855-a5ed-38d32918e42b"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.apiproduct.name", "success": true, "value": "apim-auto-d8fcd097-70a2-4855-a5ed-38d32918e42b"}}, {"Set": {"name": "developer.email", "success": true, "value": "apm-testing-internal-dev@nhs.net"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.developer.email", "success": true, "value": "apm-testing-internal-dev@nhs.net"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.issued_at", "success": true, "value": "1636037442355"}}, {"Set": {"name": "client_id", "success": true, "value": "8z3lF1KOiIRvua1g5GXvpp5G76BUQazx"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.client_id", "success": true, "value": "8z3lF1KOiIRvua1g5GXvpp5G76BUQazx"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.developer.app.id", "success": true, "value": "d93681cd-e785-4180-9282-7621420b2fac"}}, {"Set": {"name": "developer.id", "success": true, "value": "nhsd-nonprod@@@ba00a768-3783-46f6-bf41-4033d2bf669d"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.developer.id", "success": true, "value": "nhsd-nonprod@@@ba00a768-3783-46f6-bf41-4033d2bf669d"}}, {"Set": {"name": "developer.app.name", "success": true, "value": "apim-auto-c1f392ee-9e5c-4abf-b662-21e88546b8ac"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.developer.app.name", "success": true, "value": "apim-auto-c1f392ee-9e5c-4abf-b662-21e88546b8ac"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.DisplayName", "success": true, "value": "apim-auto-c1f392ee-9e5c-4abf-b662-21e88546b8ac"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.client_secret", "success": true, "value": "SyQEm8PrDoRfIkH6"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.expires_in", "success": true, "value": "0"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.apiproduct.access", "success": true, "value": "public"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.status", "success": true, "value": "approved"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.apiproduct.developer.quota.timeunit", "success": true, "value": "minute"}}, {"Set": {"name": "apigee.apiproduct.name", "success": true, "value": "apim-auto-d8fcd097-70a2-4855-a5ed-38d32918e42b"}}, {"Set": {"name": "apigee.developer.email", "success": true, "value": "apm-testing-internal-dev@nhs.net"}}, {"Set": {"name": "apigee.client_id", "success": true, "value": "8z3lF1KOiIRvua1g5GXvpp5G76BUQazx"}}, {"Set": {"name": "apigee.developer.id", "success": true, "value": "nhsd-nonprod@@@ba00a768-3783-46f6-bf41-4033d2bf669d"}}, {"Set": {"name": "apigee.developer.app.name", "success": true, "value": "apim-auto-c1f392ee-9e5c-4abf-b662-21e88546b8ac"}}, {"Get": {"name": "organization.name", "value": "nhsd-nonprod"}}, {"Set": {"name": "developer.app.id", "success": true, "value": "d93681cd-e785-4180-9282-7621420b2fac"}}, {"Set": {"name": "verifyapikey.VerifyAPIKey.ClientId.failed", "success": true, "value": "false"}}, {"Set": {"name": "oauthV2.failed", "success": true, "value": "false"}}, {"Set": {"name": "apigee.metrics.policy.VerifyAPIKey.ClientId.timeTaken", "success": true, "value": "13638343"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "flowcallout"}, {"name": "type", "value": "FlowCalloutStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "Apply Rate Limiting"}, {"name": "stepDefinition-name", "value": "FlowCallout.ApplyRatelimitingClientId"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:559"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.FlowCallout.ApplyRatelimitingClientId.timeTaken", "success": true, "value": "17987"}}]}]}, {"id": "FlowCallout", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "ApplyRateLimiting"}]}, "timestamp": "04-11-21 14:51:05:559"}]}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "javascript-executionTime", "value": "0"}, {"name": "action", "value": "CONTINUE"}, {"name": "javascript-timeLimit", "value": "200"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "javascript"}, {"name": "javascript-name", "value": "set-ratelimits.js"}, {"name": "type", "value": "JavascriptStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "Javascript.SetRatelimits"}, {"name": "stepDefinition-name", "value": "Javascript.SetRatelimits"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:559"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "verifyApiKeyPolicyName", "value": "VerifyAPIKey.ClientId"}}, {"Get": {"name": "apiproxy.name", "value": "identity-service-pr-251"}}, {"Get": {"name": "verifyapikey.VerifyAPIKey.ClientId.apiproduct.developer.quota.limit", "value": "60000"}}, {"Get": {"name": "verifyapikey.VerifyAPIKey.ClientId.apiproduct.developer.quota.interval", "value": "1"}}, {"Get": {"name": "verifyapikey.VerifyAPIKey.ClientId.apiproduct.developer.quota.timeunit", "value": "minute"}}, {"Get": {"name": "verifyapikey.VerifyAPIKey.ClientId.apiproduct.ratelimit", "value": "1000ps"}}, {"Get": {"name": "ratelimiting", "value": "{\n    \"app\": {\n        \"quota\": {\n            \"enabled\": true,\n            \"interval\": 1,\n            \"limit\": 300,\n            \"timeunit\": \"minute\"\n        },\n        \"spikeArrest\": {\n            \"enabled\": false\n        }\n    },\n    \"proxy\": {\n        \"quota\": {\n            \"enabled\": false\n        },\n        \"spikeArrest\": {\n            \"enabled\": true,\n            \"ratelimit\": \"300000pm\"\n        }\n    }\n}"}}, {"Get": {"name": "verifyapikey.VerifyAPIKey.ClientId.app.ratelimiting"}}, {"Get": {"name": "verifyapikey.VerifyAPIKey.ClientId.apiproduct.ratelimiting"}}, {"Get": {"name": "ratelimiting", "value": "{\n    \"app\": {\n        \"quota\": {\n            \"enabled\": true,\n            \"interval\": 1,\n            \"limit\": 300,\n            \"timeunit\": \"minute\"\n        },\n        \"spikeArrest\": {\n            \"enabled\": false\n        }\n    },\n    \"proxy\": {\n        \"quota\": {\n            \"enabled\": false\n        },\n        \"spikeArrest\": {\n            \"enabled\": true,\n            \"ratelimit\": \"300000pm\"\n        }\n    }\n}"}}, {"Set": {"name": "proxy_quota_enabled", "success": true, "value": "false"}}, {"Set": {"name": "proxy_spikeArrest_enabled", "success": true, "value": "true"}}, {"Set": {"name": "proxy_spikeArrest_ratelimit", "success": true, "value": "300000pm"}}, {"Set": {"name": "app_quota_limit", "success": true, "value": "300"}}, {"Set": {"name": "app_quota_interval", "success": true, "value": "1"}}, {"Set": {"name": "app_quota_timeunit", "success": true, "value": "minute"}}, {"Set": {"name": "app_quota_enabled", "success": true, "value": "true"}}, {"Set": {"name": "app_spikeArrest_ratelimit", "success": true, "value": "1000ps"}}, {"Set": {"name": "app_spikeArrest_enabled", "success": true, "value": "false"}}, {"Set": {"name": "apigee.metrics.policy.Javascript.SetRatelimits.timeTaken", "success": true, "value": "298724"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Paused", "results": []}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ratelimit.QuotaPerApp.expiry.time", "value": "1636037465560"}, {"name": "ratelimit.QuotaPerApp.failed", "value": "false"}, {"name": "ratelimit.QuotaPerApp.datastore.fail.open", "value": "false"}, {"name": "ratelimit.QuotaPerApp.class.total.exceed.count", "value": "0"}, {"name": "ratelimit.QuotaPerApp.allowed.count", "value": "300"}, {"name": "ratelimit.QuotaPerApp.fault.name", "value": ""}, {"name": "ratelimit.QuotaPerApp.class.used.count", "value": "0"}, {"name": "ratelimit.QuotaPerApp.class.available.count", "value": "0"}, {"name": "ratelimit.QuotaPerApp.total.exceed.count", "value": "0"}, {"name": "ratelimit.QuotaPerApp.class.allowed.count", "value": "0"}, {"name": "ratelimit.QuotaPerApp.used.count", "value": "1"}, {"name": "ratelimit.QuotaPerApp.identifier", "value": "d93681cd-e785-4180-9282-7621420b2fac"}, {"name": "ratelimit.QuotaPerApp.exceed.count", "value": "0"}, {"name": "ratelimit.QuotaPerApp.class.exceed.count", "value": "0"}, {"name": "ratelimit.QuotaPerApp.available.count", "value": "299"}, {"name": "ratelimit.QuotaPerApp.fault.cause", "value": ""}]}, "timestamp": "04-11-21 14:51:05:563"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "Quota"}, {"name": "expression", "value": "(app_quota_enabled equals true)"}, {"name": "type", "value": "RateLimitExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "true"}, {"name": "expressionResult", "value": "true"}, {"name": "stepDefinition-displayName", "value": "Quota Per App"}, {"name": "stepDefinition-name", "value": "QuotaPerApp"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:563"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "app_quota_interval", "value": "1"}}, {"Get": {"name": "app_quota_timeunit", "value": "minute"}}, {"Get": {"name": "developer.app.id", "value": "d93681cd-e785-4180-9282-7621420b2fac"}}, {"Get": {"name": "app_quota_limit", "value": "300"}}, {"Set": {"name": "apigee.metrics.policy.QuotaPerApp.timeTaken", "success": true, "value": "3120722"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "raisefault"}, {"name": "expression", "value": "(ratelimit.QuotaPerApp.failed equals true)"}, {"name": "type", "value": "RaiseFaultExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "RaiseFault.QuotaPerApp"}, {"name": "stepDefinition-name", "value": "RaiseFault.QuotaPerApp"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:563"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "app_quota_interval", "value": "1"}}, {"Get": {"name": "app_quota_timeunit", "value": "minute"}}, {"Get": {"name": "developer.app.id", "value": "d93681cd-e785-4180-9282-7621420b2fac"}}, {"Get": {"name": "app_quota_limit", "value": "300"}}, {"Set": {"name": "apigee.metrics.policy.QuotaPerApp.timeTaken", "success": true, "value": "3120722"}}, {"Get": {"name": "ratelimit.QuotaPerApp.failed", "value": "false"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "SpikeArrest"}, {"name": "expression", "value": "(app_spikeArrest_enabled equals true)"}, {"name": "type", "value": "RateLimitExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "true"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "Per-app Spike Arrest"}, {"name": "stepDefinition-name", "value": "SpikeArrestPerApp"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:563"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "app_spikeArrest_enabled", "value": "false"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "raisefault"}, {"name": "expression", "value": "(ratelimit.SpikeArrestPerApp.failed equals true)"}, {"name": "type", "value": "RaiseFaultExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "RaiseFault.SpikeArrestPerApp"}, {"name": "stepDefinition-name", "value": "RaiseFault.SpikeArrestPerApp"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:563"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "ratelimit.SpikeArrestPerApp.failed"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "Quota"}, {"name": "expression", "value": "(proxy_quota_enabled equals true)"}, {"name": "type", "value": "RateLimitExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "true"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "Quota Per Proxy"}, {"name": "stepDefinition-name", "value": "QuotaPerProxy"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:563"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy_quota_enabled", "value": "false"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "raisefault"}, {"name": "expression", "value": "(ratelimit.QuotaPerProxy.failed equals true)"}, {"name": "type", "value": "RaiseFaultExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "RaiseFault.QuotaPerProxy"}, {"name": "stepDefinition-name", "value": "RaiseFault.QuotaPerProxy"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:563"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "ratelimit.QuotaPerProxy.failed"}}]}]}, {"id": "Paused", "results": []}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ratelimit.SpikeArrestPerProxy.allowed.count", "value": "300000"}, {"name": "ratelimit.SpikeArrestPerProxy.fault.name", "value": ""}, {"name": "ratelimit.SpikeArrestPerProxy.fault.cause", "value": ""}, {"name": "ratelimit.SpikeArrestPerProxy.expiry.time", "value": "0"}, {"name": "ratelimit.SpikeArrestPerProxy.datastore.fail.open", "value": "false"}, {"name": "ratelimit.SpikeArrestPerProxy.identifier", "value": "nhsd-nonprod@@@internal-dev@@@identity-service-pr-251@@@SpikeArrestPerProxy@@@nondistributed@@@_default"}, {"name": "ratelimit.SpikeArrestPerProxy.available.count", "value": "299999"}, {"name": "ratelimit.SpikeArrestPerProxy.used.count", "value": "1"}, {"name": "ratelimit.SpikeArrestPerProxy.total.exceed.count", "value": "0"}, {"name": "ratelimit.SpikeArrestPerProxy.class.available.count", "value": "0"}, {"name": "ratelimit.SpikeArrestPerProxy.class.total.exceed.count", "value": "0"}, {"name": "ratelimit.SpikeArrestPerProxy.exceed.count", "value": "0"}, {"name": "ratelimit.SpikeArrestPerProxy.class.exceed.count", "value": "0"}, {"name": "ratelimit.SpikeArrestPerProxy.failed", "value": "false"}, {"name": "ratelimit.SpikeArrestPerProxy.class.allowed.count", "value": "0"}, {"name": "ratelimit.SpikeArrestPerProxy.class.used.count", "value": "0"}]}, "timestamp": "04-11-21 14:51:05:563"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "SpikeArrest"}, {"name": "expression", "value": "(proxy_spikeArrest_enabled equals true)"}, {"name": "type", "value": "RateLimitExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "true"}, {"name": "stepDefinition-displayName", "value": "Per-proxy Spike Arrest"}, {"name": "stepDefinition-name", "value": "SpikeArrestPerProxy"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:563"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy_spikeArrest_ratelimit", "value": "300000pm"}}, {"Set": {"name": "apigee.metrics.policy.SpikeArrestPerProxy.timeTaken", "success": true, "value": "52093"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "raisefault"}, {"name": "expression", "value": "(ratelimit.SpikeArrestPerProxy.failed equals true)"}, {"name": "type", "value": "RaiseFaultExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "RaiseFault.SpikeArrestPerProxy"}, {"name": "stepDefinition-name", "value": "RaiseFault.SpikeArrestPerProxy"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:563"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy_spikeArrest_ratelimit", "value": "300000pm"}}, {"Set": {"name": "apigee.metrics.policy.SpikeArrestPerProxy.timeTaken", "success": true, "value": "52093"}}, {"Get": {"name": "ratelimit.SpikeArrestPerProxy.failed", "value": "false"}}]}]}, {"id": "FlowReturn", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "ApplyRateLimiting"}]}, "timestamp": "04-11-21 14:51:05:564"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "raisefault"}, {"name": "expression", "value": "(request.queryparam.redirect_uri equals null)"}, {"name": "type", "value": "RaiseFaultExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "RaiseFault.MissingRedirectUri"}, {"name": "stepDefinition-name", "value": "RaiseFault.MissingRedirectUri"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:564"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.edge.sharedflow.name", "success": true}}, {"Get": {"name": "request.queryparam.redirect_uri", "value": "https://httpbin.org/anything"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "raisefault"}, {"name": "expression", "value": "(request.queryparam.redirect_uri not equals verifyapikey.VerifyAPIKey.ClientId.redirection_uris)"}, {"name": "type", "value": "RaiseFaultExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "RaiseFault.VerifyRedirectUriQueryParam"}, {"name": "stepDefinition-name", "value": "RaiseFault.VerifyRedirectUriQueryParam"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:564"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "request.queryparam.redirect_uri", "value": "https://httpbin.org/anything"}}, {"Get": {"name": "verifyapikey.VerifyAPIKey.ClientId.redirection_uris", "value": "https://httpbin.org/anything"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "raisefault"}, {"name": "expression", "value": "(request.queryparam.state equals null)"}, {"name": "type", "value": "RaiseFaultExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "RaiseFault.MissingState"}, {"name": "stepDefinition-name", "value": "RaiseFault.MissingState"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:564"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "request.queryparam.state", "value": "45e71699-70ec-4271-8274-c97f76a62f4e"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "raisefault"}, {"name": "expression", "value": "(request.queryparam.response_type equals null)"}, {"name": "type", "value": "RaiseFaultExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "RaiseFault.MissingResponseType"}, {"name": "stepDefinition-name", "value": "RaiseFault.MissingResponseType"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:564"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "request.queryparam.response_type", "value": "code"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "raisefault"}, {"name": "expression", "value": "(request.queryparam.response_type not equals \"code\")"}, {"name": "type", "value": "RaiseFaultExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "RaiseFault.VerifyResponseType"}, {"name": "stepDefinition-name", "value": "RaiseFault.VerifyResponseType"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:564"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "request.queryparam.response_type", "value": "code"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.SetDummyGrantType"}, {"name": "stepDefinition-name", "value": "AssignMessage.SetDummyGrantType"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:564"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "dummy_grant_type", "success": true, "value": "client_credentials"}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.SetDummyGrantType.timeTaken", "success": true, "value": "9275"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "BasicAuthentication"}, {"name": "type", "value": "BasicAuthStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "BasicAuthentication.EncodeClientCredentials"}, {"name": "stepDefinition-name", "value": "BasicAuthentication.EncodeClientCredentials"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:564"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.BasicAuthentication.EncodeClientCredentials.timeTaken", "success": true, "value": "94638"}}]}]}, {"id": "Paused", "results": []}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "oauthV2.OAuthV2.GenerateAccessTokenDummy.fault.cause", "value": ""}, {"name": "oauthV2.OAuthV2.GenerateAccessTokenDummy.fault.name", "value": ""}, {"name": "oauthV2.OAuthV2.GenerateAccessTokenDummy.failed", "value": "false"}]}, "timestamp": "04-11-21 14:51:05:567"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "Identifier", "value": "oauthv2client.OAuthV2.GenerateAccessTokenDummy"}]}, "timestamp": "04-11-21 14:51:05:567"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "Identifier", "value": "oauthv2accesstoken.OAuthV2.GenerateAccessTokenDummy"}]}, "timestamp": "04-11-21 14:51:05:567"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "oauthV2"}, {"name": "type", "value": "GenerateAccessTokenExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "OAuthV2.GenerateAccessTokenDummy"}, {"name": "stepDefinition-name", "value": "OAuthV2.GenerateAccessTokenDummy"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:567"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "oauthV2.OAuthV2.GenerateAccessTokenDummy"}}, {"Get": {"name": "dummy_grant_type", "value": "client_credentials"}}, {"Get": {"name": "verifyapikey.VerifyAPIKey.ClientId.client_id", "value": "8z3lF1KOiIRvua1g5GXvpp5G76BUQazx"}}, {"Get": {"name": "oauth_external_authorization_status"}}, {"Set": {"name": "apigee.developer.id", "success": true, "value": "nhsd-nonprod@@@ba00a768-3783-46f6-bf41-4033d2bf669d"}}, {"Set": {"name": "apigee.developer.app.name", "success": true, "value": "apim-auto-c1f392ee-9e5c-4abf-b662-21e88546b8ac"}}, {"Set": {"name": "apigee.developer.email", "success": true, "value": "apm-testing-internal-dev@nhs.net"}}, {"Set": {"name": "apigee.client_id", "success": true, "value": "8z3lF1KOiIRvua1g5GXvpp5G76BUQazx"}}, {"Set": {"name": "apigee.developer.email", "success": true, "value": "apm-testing-internal-dev@nhs.net"}}, {"Set": {"name": "apigee.client_id", "success": true, "value": "8z3lF1KOiIRvua1g5GXvpp5G76BUQazx"}}, {"Set": {"name": "apigee.access_token", "success": true, "value": "Eze4kjnTAUyjBMsFVzA7Llk9BtMr"}}, {"Get": {"name": "organization.name", "value": "nhsd-nonprod"}}, {"Set": {"name": "oauthV2.failed", "success": true, "value": "false"}}, {"Set": {"name": "apigee.metrics.policy.OAuthV2.GenerateAccessTokenDummy.timeTaken", "success": true, "value": "2778896"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.GenerateState"}, {"name": "stepDefinition-name", "value": "AssignMessage.GenerateState"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:567"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.AssignMessage.GenerateState.timeTaken", "success": true, "value": "64344"}}]}]}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "script-type", "value": "py"}, {"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "script-name", "value": "generate-state.py"}, {"name": "stepDefinition-type", "value": "script"}, {"name": "type", "value": "ScriptExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "Python.SecureState"}, {"name": "stepDefinition-name", "value": "Python.GenerateState"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:571"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.state", "success": true, "value": "crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht"}}, {"Set": {"name": "apigee.metrics.policy.Python.GenerateState.timeTaken", "success": true, "value": "4223926"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "javascript-executionTime", "value": "0"}, {"name": "action", "value": "CONTINUE"}, {"name": "javascript-timeLimit", "value": "200"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "javascript"}, {"name": "javascript-name", "value": "create-cache-entry.js"}, {"name": "type", "value": "JavascriptStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "JavaScript.CreateCacheEntry"}, {"name": "stepDefinition-name", "value": "JavaScript.CreateCacheEntry"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:572"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "request.queryparam.client_id", "value": "8z3lF1KOiIRvua1g5GXvpp5G76BUQazx"}}, {"Get": {"name": "identity-service-config.cis2.simulated_idp", "value": "false"}}, {"Get": {"name": "request.queryparam.state", "value": "45e71699-70ec-4271-8274-c97f76a62f4e"}}, {"Get": {"name": "request.queryparam.redirect_uri", "value": "https://httpbin.org/anything"}}, {"Get": {"name": "request.queryparam.response_type", "value": "code"}}, {"Get": {"name": "oauthv2accesstoken.OAuthV2.GenerateAccessTokenDummy.scope", "value": "urn:nhsd:apim:user-nhs-login:P9:some-api urn:nhsd:apim:app:level3: urn:nhsd:apim:user-nhs-id:aal3:personal-demographics-service urn:nhsd:apim:user-nhs-login:P5:some-api personal-demographics-service:USER-RESTRICTED urn:nhsd:apim:user-nhs-login:P0:some-api"}}, {"Get": {"name": "idp", "value": "null"}}, {"Set": {"name": "cacheEntry", "success": true, "value": "{\"client_id\":\"8z3lF1KOiIRvua1g5GXvpp5G76BUQazx\",\"redirect_uri\":\"https://httpbin.org/anything\",\"state\":\"45e71699-70ec-4271-8274-c97f76a62f4e\",\"response_type\":\"code\",\"scope\":\"urn:nhsd:apim:user-nhs-login:P9:some-api urn:nhsd:apim:app:level3: urn:nhsd:apim:user-nhs-id:aal3:personal-demographics-service urn:nhsd:apim:user-nhs-login:P5:some-api personal-demographics-service:USER-RESTRICTED urn:nhsd:apim:user-nhs-login:P0:some-api\",\"idp\":\"null\"}"}}, {"Set": {"name": "apigee.metrics.policy.JavaScript.CreateCacheEntry.timeTaken", "success": true, "value": "309160"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "populatecache"}, {"name": "type", "value": "PopulateCacheExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "PopulateCache.OriginalClientInfo"}, {"name": "stepDefinition-name", "value": "PopulateCache.OriginalClientInfo"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:573"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "target"}}, {"Get": {"name": "apigee.state", "value": "crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht"}}, {"Get": {"name": "cacheEntry", "value": "{\"client_id\":\"8z3lF1KOiIRvua1g5GXvpp5G76BUQazx\",\"redirect_uri\":\"https://httpbin.org/anything\",\"state\":\"45e71699-70ec-4271-8274-c97f76a62f4e\",\"response_type\":\"code\",\"scope\":\"urn:nhsd:apim:user-nhs-login:P9:some-api urn:nhsd:apim:app:level3: urn:nhsd:apim:user-nhs-id:aal3:personal-demographics-service urn:nhsd:apim:user-nhs-login:P5:some-api personal-demographics-service:USER-RESTRICTED urn:nhsd:apim:user-nhs-login:P0:some-api\",\"idp\":\"null\"}"}}, {"Set": {"name": "apigee.metrics.policy.PopulateCache.OriginalClientInfo.timeTaken", "success": true, "value": "74760"}}]}]}, {"id": "Resumed", "results": []}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "javascript-executionTime", "value": "0"}, {"name": "action", "value": "CONTINUE"}, {"name": "javascript-timeLimit", "value": "200"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "javascript"}, {"name": "javascript-name", "value": "set-logging-fields.js"}, {"name": "type", "value": "JavascriptStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "JavaScript.SetLoggingFields"}, {"name": "stepDefinition-name", "value": "JavaScript.SetLoggingFields"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:573"}, {"ActionResult": "RequestMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "uRI": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e", "verb": "GET"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "request.formparam.grant_type"}}, {"Get": {"name": "proxy.pathsuffix", "value": "/authorize"}}, {"Get": {"name": "identity-service-config.cis2.issuer", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock"}}, {"Get": {"name": "identity-service-config.nhs_login.issuer", "value": "https://internal-dev.api.service.nhs.uk"}}, {"Get": {"name": "idp", "value": "null"}}, {"Get": {"name": "jwt.DecodeJWT.FromExternalIdToken.claim.nhs_number"}}, {"Get": {"name": "jwt.VerifyJWT.SubjectToken.claim.nhs_number"}}, {"Set": {"name": "splunk.auth.grant_type", "success": true, "value": "authorization_code"}}, {"Set": {"name": "splunk.auth.type", "success": true, "value": "user"}}, {"Set": {"name": "splunk.auth.provider", "success": true, "value": "nhs-cis2"}}, {"Set": {"name": "splunk.auth.level", "success": true, "value": ""}}, {"Set": {"name": "splunk.auth.user_id", "success": true, "value": ""}}, {"Set": {"name": "accesstoken.auth_grant_type", "success": true, "value": "authorization_code"}}, {"Set": {"name": "accesstoken.auth_type", "success": true, "value": "user"}}, {"Set": {"name": "accesstoken.auth_level", "success": true, "value": ""}}, {"Set": {"name": "accesstoken.auth_provider", "success": true, "value": "nhs-cis2"}}, {"Set": {"name": "accesstoken.auth_user_id", "success": true, "value": ""}}, {"Set": {"name": "apigee.metrics.policy.JavaScript.SetLoggingFields.timeTaken", "success": true, "value": "373230"}}]}]}, {"id": "Resumed", "results": []}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "proxy.flow.name", "value": "PostFlow"}]}, "timestamp": "04-11-21 14:51:05:575"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "PostFlow"}]}, "timestamp": "04-11-21 14:51:05:575"}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /_ping and ((request.verb equals \"GET\") or (request.verb equals \"HEAD\")))"}, {"name": "Tree", "value": "TARGET_SELECTOR"}]}, "timestamp": "04-11-21 14:51:05:575"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/authorize"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /userinfo and (request.verb equals \"GET\"))"}, {"name": "Tree", "value": "TARGET_SELECTOR"}]}, "timestamp": "04-11-21 14:51:05:576"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/authorize"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "type", "value": "EchoRequestExecution"}]}, "timestamp": "04-11-21 14:51:05:576"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "OK", "statusCode": "200"}, {"ActionResult": "VariableAccess", "accessList": []}]}, {"id": "StateChange", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "To", "value": "PROXY_RESP_FLOW"}, {"name": "From", "value": "PROXY_REQ_FLOW"}]}, "timestamp": "04-11-21 14:51:05:576"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Authorization", "value": "*****"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(\"default\" equals proxy.name)"}, {"name": "Tree", "value": "PROXY_default"}]}, "timestamp": "04-11-21 14:51:05:576"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.name", "value": "default"}}]}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "proxy.flow.name", "value": "PreFlow"}]}, "timestamp": "04-11-21 14:51:05:576"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "PreFlow"}]}, "timestamp": "04-11-21 14:51:05:576"}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /_ping and ((request.verb equals \"GET\") or (request.verb equals \"HEAD\")))"}, {"name": "Tree", "value": "AddPayloadToPing_RESPONSE_FLOW"}]}, "timestamp": "04-11-21 14:51:05:576"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/authorize"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(proxy.pathsuffix matches /authorize and (request.verb equals \"GET\"))"}, {"name": "Tree", "value": "Flow.GetAuthorization_RESPONSE_FLOW"}]}, "timestamp": "04-11-21 14:51:05:576"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.pathsuffix", "value": "/authorize"}}, {"Get": {"name": "request.verb", "value": "GET"}}]}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "proxy.flow.name", "value": "Flow.GetAuthorization"}, {"name": "proxy.flow.description", "value": "OAuth Authorization Endpoint"}]}, "timestamp": "04-11-21 14:51:05:576"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "Flow.GetAuthorization"}, {"name": "current.flow.description", "value": "OAuth Authorization Endpoint"}]}, "timestamp": "04-11-21 14:51:05:576"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "response"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.RemoveAuthorizationHeader"}, {"name": "stepDefinition-name", "value": "AssignMessage.RemoveAuthorizationHeader"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:576"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "OK", "statusCode": "200"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.AssignMessage.RemoveAuthorizationHeader.timeTaken", "success": true, "value": "12433"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "expression", "value": "proxy.basepath matches oauth2-int-pr-*"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "response"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.SetAuthorizationPRRedirect"}, {"name": "stepDefinition-name", "value": "AssignMessage.SetAuthorizationPRRedirect"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:576"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "OK", "statusCode": "200"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.AssignMessage.RemoveAuthorizationHeader.timeTaken", "success": true, "value": "12433"}}, {"Get": {"name": "proxy.basepath", "value": "oauth2-pr-251"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "expression", "value": "((notproxy.basepath matches oauth2-int-pr-*) and (idp not equals \"nhs-login\"))"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "response"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "true"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.SetAuthorizationRedirectCis2"}, {"name": "stepDefinition-name", "value": "AssignMessage.SetAuthorizationRedirectCis2"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:576"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "identity-service-config.cis2.authorize_endpoint", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth"}}, {"Get": {"name": "request.queryparam.response_type", "value": "code"}}, {"Get": {"name": "identity-service-config.cis2.client_id", "value": "test-client-1"}}, {"Get": {"name": "identity-service-config.cis2.redirect_uri", "value": "https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback"}}, {"Get": {"name": "apigee.state", "value": "crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht"}}, {"Set": {"name": "message.header.Location", "success": true, "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}}, {"Set": {"name": "message.status.code", "success": true, "value": "302"}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.SetAuthorizationRedirectCis2.timeTaken", "success": true, "value": "79797"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "expression", "value": "((notproxy.basepath matches oauth2-int-pr-*) and (idp equals \"nhs-login\"))"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "response"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.SetAuthorizationRedirectNHSLogin"}, {"name": "stepDefinition-name", "value": "AssignMessage.SetAuthorizationRedirectNHSLogin"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:576"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "identity-service-config.cis2.authorize_endpoint", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth"}}, {"Get": {"name": "request.queryparam.response_type", "value": "code"}}, {"Get": {"name": "identity-service-config.cis2.client_id", "value": "test-client-1"}}, {"Get": {"name": "identity-service-config.cis2.redirect_uri", "value": "https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback"}}, {"Get": {"name": "apigee.state", "value": "crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht"}}, {"Set": {"name": "message.header.Location", "success": true, "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}}, {"Set": {"name": "message.status.code", "success": true, "value": "302"}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.SetAuthorizationRedirectCis2.timeTaken", "success": true, "value": "79797"}}, {"Get": {"name": "proxy.basepath", "value": "oauth2-pr-251"}}, {"Get": {"name": "idp", "value": "null"}}]}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "proxy.flow.name", "value": "PostFlow"}]}, "timestamp": "04-11-21 14:51:05:576"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "PostFlow"}]}, "timestamp": "04-11-21 14:51:05:576"}]}, {"id": "StateChange", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "To", "value": "RESP_SENT"}, {"name": "From", "value": "PROXY_RESP_FLOW"}]}, "timestamp": "04-11-21 14:51:05:576"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "type", "value": "FlowHookAction"}]}, "timestamp": "04-11-21 14:51:05:576"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}, {"ActionResult": "VariableAccess", "accessList": []}]}, {"id": "FlowCallout", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "PostProxyFlowHook->PostProxySharedFlow"}]}, "timestamp": "04-11-21 14:51:05:576"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "true"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.SetHSTSHeader"}, {"name": "stepDefinition-name", "value": "AssignMessage.SetHSTSHeader"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:576"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "message.header.Strict-Transport-Security", "success": true, "value": "max-age=864000; includeSubDomains"}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.SetHSTSHeader.timeTaken", "success": true, "value": "9271"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "expression", "value": "original-request-details.header.X-Correlation-ID matches regular expression .+"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.Mirror.CorrelationID"}, {"name": "stepDefinition-name", "value": "AssignMessage.Mirror.CorrelationID"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:576"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "message.header.Strict-Transport-Security", "success": true, "value": "max-age=864000; includeSubDomains"}}, {"Set": {"name": "apigee.metrics.policy.AssignMessage.SetHSTSHeader.timeTaken", "success": true, "value": "9271"}}, {"Get": {"name": "original-request-details.header.X-Correlation-ID"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "assignmessage"}, {"name": "expression", "value": "((flag.custom-header-x-request-id not equals true) and original-request-details.header.X-Request-ID matches regular expression .+)"}, {"name": "type", "value": "AssignMessageExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "false"}, {"name": "stepDefinition-displayName", "value": "AssignMessage.Mirror.RequestID"}, {"name": "stepDefinition-name", "value": "AssignMessage.Mirror.RequestID"}, {"name": "stepDefinition-enabled", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:576"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "flag.custom-header-x-request-id"}}, {"Get": {"name": "original-request-details.header.X-Request-ID"}}]}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "flowcallout"}, {"name": "expression", "value": "((apigee.access_token not equals null) and (apigee.access_token not equals \"\"))"}, {"name": "type", "value": "FlowCalloutStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "expressionResult", "value": "true"}, {"name": "stepDefinition-displayName", "value": "FlowCallout.HashAccessToken"}, {"name": "stepDefinition-name", "value": "FlowCallout.HashAccessToken"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:576"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.FlowCallout.HashAccessToken.timeTaken", "success": true, "value": "6975"}}]}]}, {"id": "FlowCallout", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "HashAccessToken"}]}, "timestamp": "04-11-21 14:51:05:576"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "HMAC"}, {"name": "type", "value": "HMACStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "HMAC.AccessToken"}, {"name": "stepDefinition-name", "value": "HMAC.AccessToken"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:577"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "apigee.access_token", "value": "Eze4kjnTAUyjBMsFVzA7Llk9BtMr"}}, {"Set": {"name": "hmac.HMAC.AccessToken.message", "success": true, "value": "Eze4kjnTAUyjBMsFVzA7Llk9BtMr"}}, {"Set": {"name": "hmac.HMAC.AccessToken.keybytes", "success": true, "value": "4241364246423933353838413838453539434539434334464341443846"}}, {"Set": {"name": "hmac.HMAC.AccessToken.outputencoding", "success": true, "value": "BASE64"}}, {"Set": {"name": "auth.access_token_hash", "success": true, "value": "qxPbQZ4YPyZGrgNBwponK+78ubdjukokUN8jQplExG/gP9XzJbyiT3EqDyHCLawb1cLp2JqMLXbSdhMNLco4uA=="}}, {"Set": {"name": "apigee.metrics.policy.HMAC.AccessToken.timeTaken", "success": true, "value": "59964"}}]}]}, {"id": "FlowReturn", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "HashAccessToken"}]}, "timestamp": "04-11-21 14:51:05:577"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "flowcallout"}, {"name": "type", "value": "FlowCalloutStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "FlowCallout.LogApiKeyProtectedEndpoints"}, {"name": "stepDefinition-name", "value": "FlowCallout.LogApiKeyProtectedEndpoints"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:577"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.FlowCallout.LogApiKeyProtectedEndpoints.timeTaken", "success": true, "value": "4818"}}]}]}, {"id": "FlowCallout", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "LogApiKeyProtectedEndpoints"}]}, "timestamp": "04-11-21 14:51:05:577"}]}, {"id": "Paused", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "javascript-executionTime", "value": "0"}, {"name": "action", "value": "CONTINUE"}, {"name": "javascript-timeLimit", "value": "200"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "javascript"}, {"name": "javascript-name", "value": "SetLoggingFields.js"}, {"name": "stepExecution-stdout", "value": "accept\naccept-encoding\naccept-language\nauthorization\nhost\nnhsd-correlation-id\nnhsd-request-id\nsec-ch-ua\nsec-ch-ua-mobile\nsec-ch-ua-platform\nsec-fetch-dest\nsec-fetch-mode\nsec-fetch-site\nsec-fetch-user\nupgrade-insecure-requests\nuser-agent\nx-forwarded-for\nx-forwarded-port\nx-forwarded-proto"}, {"name": "type", "value": "JavascriptStepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "JavaScript.SetLoggingFields"}, {"name": "stepDefinition-name", "value": "JavaScript.SetLoggingFields"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:577"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "apigee.client_id", "value": "8z3lF1KOiIRvua1g5GXvpp5G76BUQazx"}}, {"Get": {"name": "message.status.code", "value": "302"}}, {"Get": {"name": "apigee.developer.app.name", "value": "apim-auto-c1f392ee-9e5c-4abf-b662-21e88546b8ac"}}, {"Get": {"name": "accesstoken.auth_grant_type", "value": "authorization_code"}}, {"Get": {"name": "request.headers.names", "value": "[Accept, Accept-Encoding, Accept-Language, Authorization, Host, NHSD-Correlation-ID, NHSD-Request-ID, sec-ch-ua, sec-ch-ua-mobile, sec-ch-ua-platform, Sec-Fetch-Dest, Sec-Fetch-Mode, Sec-Fetch-Site, Sec-Fetch-User, Upgrade-Insecure-Requests, User-Agent, X-Forwarded-For, X-Forwarded-Port, X-Forwarded-Proto]"}}, {"Set": {"name": "apigee.metrics.policy.JavaScript.SetLoggingFields.timeTaken", "success": true, "value": "535109"}}]}]}, {"id": "Resumed", "results": []}, {"id": "FlowReturn", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "LogApiKeyProtectedEndpoints"}]}, "timestamp": "04-11-21 14:51:05:577"}]}, {"id": "FlowReturn", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "PostProxyFlowHook->PostProxySharedFlow"}]}, "timestamp": "04-11-21 14:51:05:577"}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(\"default\" equals proxy.name)"}, {"name": "Tree", "value": "PROXY_default"}]}, "timestamp": "04-11-21 14:51:05:577"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.edge.sharedflow.name", "success": true}}, {"Set": {"name": "apigee.edge.flowhook.name", "success": true}}, {"Get": {"name": "proxy.name", "value": "default"}}]}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "false"}, {"name": "Expression", "value": "(\"identity-server-userinfo\" equals target.name)"}, {"name": "Tree", "value": "TARGET_identity-server-userinfo"}]}, "timestamp": "04-11-21 14:51:05:577"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "target.name"}}]}]}, {"id": "StateChange", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "To", "value": "END"}, {"name": "From", "value": "RESP_SENT"}]}, "timestamp": "04-11-21 14:51:05:577"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}]}, {"id": "DebugMask", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "SuccessFullyMaskedConfigs", "value": "[]"}]}, "timestamp": "04-11-21 14:51:05:578"}]}, {"id": "Resumed", "results": []}, {"id": "StateChange", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "To", "value": "PROXY_POST_RESP_SENT"}, {"name": "From", "value": "END"}]}, "timestamp": "04-11-21 14:51:05:578"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Content-Length", "value": "0"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Apigee.dp.color", "value": "mp-564-210308-0060114-latest-cf6a"}, {"name": "X-Apigee.Message-ID", "value": "rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "X-Apigee.nat", "value": "prod-geu2b-gnat001"}, {"name": "X-Apigee.proxy", "value": "/organizations/nhsd-nonprod/environments/internal-dev/apiproxies/identity-service-pr-251/revisions/14"}, {"name": "X-Apigee.proxy.basepath", "value": "oauth2-pr-251"}, {"name": "X-Apigee.region", "value": "europe-west2"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}]}, {"id": "Condition", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ExpressionResult", "value": "true"}, {"name": "Expression", "value": "(\"default\" equals proxy.name)"}, {"name": "Tree", "value": "PROXY_default"}]}, "timestamp": "04-11-21 14:51:05:578"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "proxy.name", "value": "default"}}]}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "proxy.flow.name", "value": "PostClientFlow"}]}, "timestamp": "04-11-21 14:51:05:578"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "current.flow.name", "value": "PostClientFlow"}]}, "timestamp": "04-11-21 14:51:05:578"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "flowcallout"}, {"name": "type", "value": "StepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "FlowCallout.LogToSplunk"}, {"name": "stepDefinition-name", "value": "FlowCallout.LogToSplunk"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:578"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Content-Length", "value": "0"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Apigee.dp.color", "value": "mp-564-210308-0060114-latest-cf6a"}, {"name": "X-Apigee.Message-ID", "value": "rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "X-Apigee.nat", "value": "prod-geu2b-gnat001"}, {"name": "X-Apigee.proxy", "value": "/organizations/nhsd-nonprod/environments/internal-dev/apiproxies/identity-service-pr-251/revisions/14"}, {"name": "X-Apigee.proxy.basepath", "value": "oauth2-pr-251"}, {"name": "X-Apigee.region", "value": "europe-west2"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}, {"ActionResult": "VariableAccess", "accessList": [{"Set": {"name": "apigee.metrics.policy.FlowCallout.LogToSplunk.timeTaken", "success": true, "value": "8005"}}]}]}, {"id": "FlowCallout", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "LogToSplunk"}]}, "timestamp": "04-11-21 14:51:05:578"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "ServiceCallout.request", "value": "{\"messageID\":\"rrt-3450588342405387872-a-geu2-16400-4719011-1\",\"client\":{\"ip\":\"3.11.106.35\",\"received_start\":\"1636037465536\",\"received_end\":\"1636037465536\",\"sent_start\":\"1636037465578\",\"sent_end\":\"1636037465578\",\"user_agent\":\"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.54 Safari/537.36\"},\"request\":{\"uri\":\"/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e7169....."}]}, "timestamp": "04-11-21 14:51:05:578"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "action", "value": "CONTINUE"}, {"name": "stepDefinition-async", "value": "false"}, {"name": "internal", "value": "false"}, {"name": "stepDefinition-type", "value": "servicecallout"}, {"name": "type", "value": "StepExecution"}, {"name": "enforcement", "value": "request"}, {"name": "stepDefinition-continueOnError", "value": "false"}, {"name": "stepDefinition-displayName", "value": "ServiceCallout.LogToSplunk"}, {"name": "stepDefinition-name", "value": "ServiceCallout.LogToSplunk"}, {"name": "stepDefinition-enabled", "value": "true"}, {"name": "result", "value": "true"}]}, "timestamp": "04-11-21 14:51:05:578"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Content-Length", "value": "0"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Apigee.dp.color", "value": "mp-564-210308-0060114-latest-cf6a"}, {"name": "X-Apigee.Message-ID", "value": "rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "X-Apigee.nat", "value": "prod-geu2b-gnat001"}, {"name": "X-Apigee.proxy", "value": "/organizations/nhsd-nonprod/environments/internal-dev/apiproxies/identity-service-pr-251/revisions/14"}, {"name": "X-Apigee.proxy.basepath", "value": "oauth2-pr-251"}, {"name": "X-Apigee.region", "value": "europe-west2"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "splunkCalloutRequest"}}, {"Set": {"name": "splunkCalloutRequest.header.Authorization", "success": true, "value": "Splunk 212c99be-0bfb-41cd-b19b-fc50385f2f35"}}, {"Set": {"name": "splunkCalloutRequest.verb", "success": true, "value": "POST"}}, {"Set": {"name": "splunkCalloutRequest.queryparam.index", "success": true, "value": "requests_apm_ptl"}}, {"Get": {"name": "virtualhost.name", "value": "secure"}}, {"Set": {"name": "splunkCalloutRequest.queryparam.host", "success": true, "value": "apigee:secure"}}, {"Get": {"name": "client.received.start.timestamp", "value": "1636037465536"}}, {"Set": {"name": "splunkCalloutRequest.queryparam.time", "success": true, "value": "1636037465536"}}, {"Set": {"name": "splunkCalloutRequest.queryparam.sourcetype", "success": true, "value": "apm-apigee-json"}}, {"Get": {"name": "organization.name", "value": "nhsd-nonprod"}}, {"Get": {"name": "environment.name", "value": "internal-dev"}}, {"Get": {"name": "apiproxy.name", "value": "identity-service-pr-251"}}, {"Get": {"name": "apiproxy.revision", "value": "14"}}, {"Set": {"name": "splunkCalloutRequest.queryparam.source", "success": true, "value": "apigee:nhsd-nonprod:internal-dev:identity-service-pr-251:14"}}, {"Get": {"name": "messageid", "value": "rrt-3450588342405387872-a-geu2-16400-4719011-1"}}, {"Get": {"name": "client.ip", "value": "3.11.106.35"}}, {"Get": {"name": "client.received.start.timestamp", "value": "1636037465536"}}, {"Get": {"name": "client.received.end.timestamp", "value": "1636037465536"}}, {"Get": {"name": "client.sent.start.timestamp", "value": "1636037465578"}}, {"Get": {"name": "client.sent.end.timestamp", "value": "1636037465578"}}, {"Get": {"name": "request-data-for-splunk.header.User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.54 Safari/537.36"}}, {"Get": {"name": "request-data-for-splunk.uri", "value": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e"}}, {"Get": {"name": "request-data-for-splunk.verb", "value": "GET"}}, {"Get": {"name": "request-data-for-splunk.header.Content-Type", "value": ""}}, {"Get": {"name": "client.received.content.length", "value": "0"}}, {"Get": {"name": "request-data-for-splunk.header.Content-Encoding"}}, {"Get": {"name": "request-data-for-splunk.header.X-Request-ID"}}, {"Get": {"name": "request-data-for-splunk.header.X-Correlation-ID"}}, {"Get": {"name": "request-data-for-splunk.header.Host", "value": "internal-dev.api.service.nhs.uk"}}, {"Get": {"name": "request-data-for-splunk.header.X-Forwarded-Port", "value": "443"}}, {"Get": {"name": "request-data-for-splunk.path", "value": "/oauth2-pr-251/authorize"}}, {"Get": {"name": "request-data-for-splunk.querystring", "value": "client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e"}}, {"Get": {"name": "organization.name", "value": "nhsd-nonprod"}}, {"Get": {"name": "apim.api_guid", "value": "d5a3f4fc-e61f-41f3-ab72-16aa5ef3ff2b"}}, {"Get": {"name": "apim.api_spec_guid", "value": ""}}, {"Get": {"name": "apigee.apiproduct.name", "value": "apim-auto-d8fcd097-70a2-4855-a5ed-38d32918e42b"}}, {"Get": {"name": "apigee.developer.app.name", "value": "apim-auto-c1f392ee-9e5c-4abf-b662-21e88546b8ac"}}, {"Get": {"name": "environment.name", "value": "internal-dev"}}, {"Get": {"name": "apigee.client_id", "value": "8z3lF1KOiIRvua1g5GXvpp5G76BUQazx"}}, {"Get": {"name": "developer.app.id", "value": "d93681cd-e785-4180-9282-7621420b2fac"}}, {"Get": {"name": "app.asid"}}, {"Get": {"name": "apiproxy.name", "value": "identity-service-pr-251"}}, {"Get": {"name": "apiproxy.revision", "value": "14"}}, {"Get": {"name": "proxy.basepath", "value": "oauth2-pr-251"}}, {"Get": {"name": "proxy.pathsuffix", "value": "/authorize"}}, {"Get": {"name": "auth.access_token_hash", "value": "qxPbQZ4YPyZGrgNBwponK+78ubdjukokUN8jQplExG/gP9XzJbyiT3EqDyHCLawb1cLp2JqMLXbSdhMNLco4uA=="}}, {"Get": {"name": "accesstoken.auth_user_id", "value": ""}}, {"Get": {"name": "accesstoken.auth_type", "value": "user"}}, {"Get": {"name": "accesstoken.auth_grant_type", "value": "authorization_code"}}, {"Get": {"name": "accesstoken.auth_level", "value": ""}}, {"Get": {"name": "accesstoken.auth_provider", "value": "nhs-cis2"}}, {"Get": {"name": "accesstoken.id_token-acr"}}, {"Get": {"name": "grant_type"}}, {"Get": {"name": "status"}}, {"Get": {"name": "accesstoken.id_token-subject"}}, {"Get": {"name": "accesstoken.id_token-issuer"}}, {"Get": {"name": "scope"}}, {"Get": {"name": "target.host"}}, {"Get": {"name": "target.response.status.code"}}, {"Get": {"name": "target.received.content.length"}}, {"Get": {"name": "target.received.start.timestamp"}}, {"Get": {"name": "target.received.end.timestamp"}}, {"Get": {"name": "target.sent.start.timestamp"}}, {"Get": {"name": "target.sent.end.timestamp"}}, {"Get": {"name": "target.port"}}, {"Get": {"name": "is.error", "value": "false"}}, {"Get": {"name": "apigee.edge.execution.is_policy_error", "value": "0"}}, {"Get": {"name": "apigee.edge.execution.is_target_error", "value": "0"}}, {"Get": {"name": "apigee.edge.execution.fault_policy_name"}}, {"Get": {"name": "apigee.edge.execution.fault_flow_name"}}, {"Get": {"name": "error"}}, {"Get": {"name": "error.content"}}, {"Get": {"name": "error.message"}}, {"Get": {"name": "error.status.code"}}, {"Get": {"name": "error.reason.phrase"}}, {"Get": {"name": "error.transport.message"}}, {"Get": {"name": "error.state"}}, {"Get": {"name": "response.status.code", "value": "302"}}, {"Get": {"name": "response.header.Content-Type"}}, {"Get": {"name": "response.header.Content-Length", "value": "0"}}, {"Get": {"name": "response.header.Content-Encoding"}}, {"Get": {"name": "status.response"}}, {"Set": {"name": "splunkCalloutRequest.content", "success": true, "value": "{\"messageID\":\"rrt-3450588342405387872-a-geu2-16400-4719011-1\",\"client\":{\"ip\":\"3.11.106.35\",\"received_start\":\"1636037465536\",\"received_end\":\"1636037465536\",\"sent_start\":\"1636037465578\",\"sent_end\":\"1636037465578\",\"user_agent\":\"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.54 Safari/537.36\"},\"request\":{\"uri\":\"/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e\",\"verb\":\"GET\",\"content_type\":\"\",\"content_length\":\"0\",\"content_encoding\":\"\",\"requestID\":\"\",\"correlationID\":\"\",\"host\":\"internal-dev.api.service.nhs.uk\",\"port\":\"443\",\"uri_path\":\"/oauth2-pr-251/authorize\",\"uri_params\":\"client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e\"},\"meta\":{\"organization\":\"nhsd-nonprod\",\"api_guid\":\"d5a3f4fc-e61f-41f3-ab72-16aa5ef3ff2b\",\"api_spec_guid\":\"\",\"product\":\"apim-auto-d8fcd097-70a2-4855-a5ed-38d32918e42b\",\"application\":\"apim-auto-c1f392ee-9e5c-4abf-b662-21e88546b8ac\",\"env\":\"internal-dev\",\"client_id\":\"8z3lF1KOiIRvua1g5GXvpp5G76BUQazx\",\"application_id\":\"d93681cd-e785-4180-9282-7621420b2fac\",\"ASID\":\"\"},\"proxy\":{\"name\":\"identity-service-pr-251\",\"revision\":\"14\",\"basepath\":\"oauth2-pr-251\",\"suffix\":\"/authorize\"},\"auth\":{\"access_token_hash\":\"qxPbQZ4YPyZGrgNBwponK+78ubdjukokUN8jQplExG/gP9XzJbyiT3EqDyHCLawb1cLp2JqMLXbSdhMNLco4uA==\",\"user\":{\"user_id\":\"\"},\"meta\":{\"auth_type\":\"user\",\"grant_type\":\"authorization_code\",\"level\":\"\",\"provider\":\"nhs-cis2\"},\"id_token_acr\":\"\",\"grant_type\":\"\",\"authorization\":\"\",\"id_token_subject\":\"\",\"id_token_issuer\":\"\",\"scope\":\"\"},\"target\":{\"host\":\"\",\"status_code\":\"\",\"content_length\":\"\",\"received_start\":\"\",\"received_end\":\"\",\"sent_start\":\"\",\"sent_end\":\"\",\"port\":\"\"},\"error\":{\"is_error\":\"false\",\"is_policy_error\":\"0\",\"is_target_error\":\"0\",\"policy_error_policy_name\":\"\",\"policy_error_flow_name\":\"\",\"error\":\"\",\"content\":\"\",\"message\":\"\",\"status_code\":\"\",\"reason_phrase\":\"\",\"transport_message\":\"\",\"state\":\"\"},\"response\":{\"status_code\":\"302\",\"content_type\":\"\",\"content_length\":\"0\",\"content_encoding\":\"\",\"content_body\":\"\"}}"}}, {"Set": {"name": "splunkCalloutRequest.header.Content-Type", "success": true, "value": "application/json"}}, {"Get": {"name": "splunkCalloutRequest"}}, {"Set": {"name": "servicecallout.requesturi", "success": true, "value": "/services/collector/raw?index=requests_apm_ptl&host=apigee%3Asecure&time=1636037465536&sourcetype=apm-apigee-json&source=apigee%3Anhsd-nonprod%3Ainternal-dev%3Aidentity-service-pr-251%3A14"}}, {"Set": {"name": "apigee.metrics.policy.ServiceCallout.LogToSplunk.timeTaken", "success": true, "value": "359800"}}]}]}, {"id": "FlowReturn", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "shared.flow.name", "value": "LogToSplunk"}]}, "timestamp": "04-11-21 14:51:05:579"}]}, {"id": "Paused", "results": []}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "loadbalancing.targetserver", "value": "splunk-cloud-hec"}, {"name": "loadbalancing.isfallback", "value": "false"}, {"name": "loadbalancing.failedservers", "value": "[]"}]}, "timestamp": "04-11-21 14:51:05:579"}]}, {"id": "FlowInfo", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "servicecallout_ServiceCallout.LogToSplunk.totalConnectionTimeMs", "value": "0"}, {"name": "servicecallout_ServiceCallout.LogToSplunk.isTlsEnabled", "value": "true"}, {"name": "servicecallout_ServiceCallout.LogToSplunk.isFromClientPool", "value": "true"}, {"name": "servicecallout_ServiceCallout.LogToSplunk.socketUseCount", "value": "339"}, {"name": "servicecallout_ServiceCallout.LogToSplunk.socketAgeMs", "value": "3492072"}, {"name": "servicecallout_ServiceCallout.LogToSplunk.resolvedAddress", "value": "35.179.10.36"}, {"name": "servicecallout_ServiceCallout.LogToSplunk.isHttpClientCached", "value": "true"}, {"name": "servicecallout_ServiceCallout.LogToSplunk.connectionTlsHandshakeTimeMs", "value": "0"}, {"name": "servicecallout_ServiceCallout.LogToSplunk.connectionStatus", "value": "CONNECTED"}]}, "timestamp": "04-11-21 14:51:05:579"}]}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "expressionResult", "value": "true"}, {"name": "type", "value": "AnalyticsPredefinedVariablesPublisher"}, {"name": "expression", "value": "(analytics equals null )"}]}, "timestamp": "04-11-21 14:51:05:579"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Content-Length", "value": "0"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Apigee.dp.color", "value": "mp-564-210308-0060114-latest-cf6a"}, {"name": "X-Apigee.Message-ID", "value": "rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "X-Apigee.nat", "value": "prod-geu2b-gnat001"}, {"name": "X-Apigee.proxy", "value": "/organizations/nhsd-nonprod/environments/internal-dev/apiproxies/identity-service-pr-251/revisions/14"}, {"name": "X-Apigee.proxy.basepath", "value": "oauth2-pr-251"}, {"name": "X-Apigee.region", "value": "europe-west2"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}, {"ActionResult": "VariableAccess", "accessList": []}]}, {"id": "Resumed", "results": []}, {"id": "Execution", "results": [{"ActionResult": "DebugInfo", "properties": {"property": [{"name": "expressionResult", "value": "false"}, {"name": "type", "value": "AnalyticsPublisher"}, {"name": "expression", "value": "(analytics not null)"}]}, "timestamp": "04-11-21 14:51:05:579"}, {"ActionResult": "ResponseMessage", "headers": [{"name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}, {"name": "Accept-Encoding", "value": "gzip,deflate,br"}, {"name": "Accept-Language", "value": "en-US,en;q=0.9"}, {"name": "Content-Length", "value": "0"}, {"name": "Host", "value": "internal-dev.api.service.nhs.uk"}, {"name": "Location", "value": "https://identity.ptl.api.platform.nhs.uk/auth/realms/cis2-mock/protocol/openid-connect/auth?response_type=code&client_id=test-client-1&redirect_uri=https://internal-dev.api.service.nhs.uk/oauth2-pr-251/callback&scope=openid%20nationalrbacaccess&state=crfyBxsDkUyR8brfxQQqlDoEqVAVgurqjEht&max_age=300"}, {"name": "NHSD-Correlation-ID", "value": "..rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "NHSD-Request-ID", "value": ""}, {"name": "sec-ch-ua", "value": "Google Chrome\";v=\"95,\"Chromium\";v=\"95\",\";Not A Brand\";v=\"99\""}, {"name": "sec-ch-ua-mobile", "value": "?0"}, {"name": "sec-ch-ua-platform", "value": "Linux"}, {"name": "Sec-Fetch-Dest", "value": "document"}, {"name": "Sec-Fetch-Mode", "value": "navigate"}, {"name": "Sec-Fetch-Site", "value": "none"}, {"name": "Sec-Fetch-User", "value": "?1"}, {"name": "Strict-Transport-Security", "value": "max-age=864000; includeSubDomains"}, {"name": "Upgrade-Insecure-Requests", "value": "1"}, {"name": "User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/95.0.4638.54 Safari/537.36"}, {"name": "X-Apigee.dp.color", "value": "mp-564-210308-0060114-latest-cf6a"}, {"name": "X-Apigee.Message-ID", "value": "rrt-3450588342405387872-a-geu2-16400-4719011-1"}, {"name": "X-Apigee.nat", "value": "prod-geu2b-gnat001"}, {"name": "X-Apigee.proxy", "value": "/organizations/nhsd-nonprod/environments/internal-dev/apiproxies/identity-service-pr-251/revisions/14"}, {"name": "X-Apigee.proxy.basepath", "value": "oauth2-pr-251"}, {"name": "X-Apigee.region", "value": "europe-west2"}, {"name": "X-Forwarded-For", "value": "3.11.106.35"}, {"name": "X-Forwarded-Port", "value": "443"}, {"name": "X-Forwarded-Proto", "value": "https"}], "reasonPhrase": "Found", "statusCode": "302"}, {"ActionResult": "VariableAccess", "accessList": [{"Get": {"name": "envoy.proxy"}}, {"Get": {"name": "servicecallout.ServiceCallout.LogToSplunk.target.url"}}, {"Get": {"name": "envoy.proxy"}}, {"Get": {"name": "envoy.proxy"}}, {"Get": {"name": "target.name"}}, {"Get": {"name": "target.basepath"}}, {"Get": {"name": "target.url"}}, {"Get": {"name": "target.host"}}, {"Get": {"name": "target.ip"}}, {"Get": {"name": "client.ip", "value": "3.11.106.35"}}, {"Get": {"name": "is.error", "value": "false"}}, {"Get": {"name": "servicecallout.ServiceCallout.LogToSplunk.expectedcn"}}, {"Get": {"name": "target.sent.start.timestamp"}}, {"Get": {"name": "dynamic.target"}}, {"Get": {"name": "target.sent.end.timestamp"}}, {"Get": {"name": "target.received.start.timestamp"}}, {"Get": {"name": "target.received.end.timestamp"}}, {"Get": {"name": "client.received.start.timestamp", "value": "1636037465536"}}, {"Get": {"name": "client.received.end.timestamp", "value": "1636037465536"}}, {"Get": {"name": "client.sent.start.timestamp", "value": "1636037465578"}}, {"Get": {"name": "client.sent.end.timestamp", "value": "1636037465578"}}, {"Get": {"name": "message.status.code", "value": "302"}}, {"Get": {"name": "request.uri", "value": "/oauth2-pr-251/authorize?client_id=8z3lF1KOiIRvua1g5GXvpp5G76BUQazx&redirect_uri=https%3A%2F%2Fhttpbin.org%2Fanything&response_type=code&state=45e71699-70ec-4271-8274-c97f76a62f4e"}}, {"Get": {"name": "request.path", "value": "/oauth2-pr-251/authorize"}}, {"Get": {"name": "request.verb", "value": "GET"}}, {"Get": {"name": "flow.resource.name"}}, {"Get": {"name": "sla"}}, {"Get": {"name": "client.received.content.length", "value": "0"}}, {"Get": {"name": "target.received.content.length"}}, {"Get": {"name": "target.response.status.code"}}, {"Get": {"name": "request.header.User-Agent", "value": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.54 Safari/537.36"}}, {"Get": {"name": "request.header.X-Apigee-Client-Device-Id"}}, {"Get": {"name": "request.header.X-Apigee-Client-Session-Id"}}, {"Get": {"name": "request.header.X-Apigee-Client-Org-Name"}}, {"Get": {"name": "request.header.X-Apigee-Client-App-Name"}}, {"Get": {"name": "request.header.X-Apigee-Client-Request-Id"}}, {"Get": {"name": "request.header.X-Forwarded-Proto", "value": "https"}}, {"Get": {"name": "request.header.True-client-ip"}}, {"Get": {"name": "analytics"}}]}]}, {"id": "Paused", "results": []}, {"id": "Resumed", "results": []}, {"id": "Paused", "results": []}]}